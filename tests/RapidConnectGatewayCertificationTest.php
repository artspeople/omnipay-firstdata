<?php

namespace Omnipay\FirstData;

use Omnipay\Tests\TestCase;

class RapidConnectGatewayCertificationTest extends TestCase
{
    public $responses;


    public function setUp()
    {
        parent::setUp();

        if (!getenv('RAPIDCONNECT_APP') ||
            !getenv('RAPIDCONNECT_DID_ECOMM') ||
            !getenv('RAPIDCONNECT_DID_MOTO') ||
            !getenv('RAPIDCONNECT_DID_RETAIL') ||
            !getenv('RAPIDCONNECT_GROUPID') ||
            !getenv('RAPIDCONNECT_MERCHANTID_ECOMM') ||
            !getenv('RAPIDCONNECT_MERCHANTID_MOTO') ||
            !getenv('RAPIDCONNECT_MERCHANTID_RETAIL') ||
            !getenv('RAPIDCONNECT_MERCHANT_EMAIL') ||
            !getenv('RAPIDCONNECT_SERVICEID') ||
            !getenv('RAPIDCONNECT_TERMINALID') ||
            !getenv('RAPIDCONNECT_TPPID')
        ) {
            $this->markTestSkipped('Missing credentials');
        }
    }


    public function testCaseNumber000000840010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '840010',
                'ReferenceNumber' => '000000840010',
                'OrderNumber' => '000000840010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAwMDA4NDAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '62107',
            'currency' => '840',
            'ClientRef' => '000000840010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001000010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '000010',
                'ReferenceNumber' => '000001000010',
                'OrderNumber' => '000001000010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAwMDEwMDAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '59017',
            'currency' => '840',
            'ClientRef' => '000001000010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001010010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '010010',
                'ReferenceNumber' => '000001010010',
                'OrderNumber' => '000001010010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAwMDEwMTAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '58314',
            'currency' => '840',
            'ClientRef' => '000001010010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001280010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '280010',
                'ReferenceNumber' => '000001280010',
                'OrderNumber' => '000001280010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAwMDEyODAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '59018',
            'currency' => '840',
            'ClientRef' => '000001280010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001290010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '290010',
                'ReferenceNumber' => '000001290010',
                'OrderNumber' => '000001290010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAwMDEyOTAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '58315',
            'currency' => '840',
            'ClientRef' => '000001290010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001340010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '340010',
                'ReferenceNumber' => '000001340010',
                'OrderNumber' => '000001340010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '30006',
            'currency' => '840',
            'ClientRef' => '000001340010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001360010And000001360011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '360010',
                'ReferenceNumber' => '000001360010',
                'OrderNumber' => '000001360010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '30132',
            'currency' => '840',
            'ClientRef' => '000001360010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '360011',
                'ReferenceNumber' => '000001360011',
                'OrderNumber' => '000001360011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '30132',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '30132',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '30132',
            'currency' => '840',
            'ClientRef' => '000001360011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001700010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '700010',
                'ReferenceNumber' => '000001700010',
                'OrderNumber' => '000001700010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '59019',
            'currency' => '840',
            'ClientRef' => '000001700010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001710010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '710010',
                'ReferenceNumber' => '000001710010',
                'OrderNumber' => '000001710010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '58316',
            'currency' => '840',
            'ClientRef' => '000001710010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001880010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180001234506',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '880010',
                'ReferenceNumber' => '000001880010',
                'OrderNumber' => '000001880010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '14052',
            'currency' => '840',
            'ClientRef' => '000001880010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000001900010And000001900011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180001234506',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '900010',
                'ReferenceNumber' => '000001900010',
                'OrderNumber' => '000001900010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '900010',
            ),
            'amount' => '14042',
            'currency' => '840',
            'ClientRef' => '000001900010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180001234506',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '900011',
                'ReferenceNumber' => '000001900011',
                'OrderNumber' => '000001900011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7018',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '7018',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7018',
            'currency' => '840',
            'ClientRef' => '000001900011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000002620010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '620010',
                'ReferenceNumber' => '000002620010',
                'OrderNumber' => '000002620010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '620010',
            ),
            'amount' => '14126',
            'currency' => '840',
            'ClientRef' => '000002620010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000002640010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '640010',
                'ReferenceNumber' => '000002640010',
                'OrderNumber' => '000002640010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '14128',
            'currency' => '840',
            'ClientRef' => '000002640010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000002660010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '660010',
                'ReferenceNumber' => '000002660010',
                'OrderNumber' => '000002660010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '660010',
            ),
            'amount' => '14118',
            'currency' => '840',
            'ClientRef' => '000002660010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000002680010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680010',
                'ReferenceNumber' => '000002680010',
                'OrderNumber' => '000002680010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '14120',
            'currency' => '840',
            'ClientRef' => '000002680010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000002700010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '700010',
                'ReferenceNumber' => '000002700010',
                'OrderNumber' => '000002700010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '700010',
            ),
            'amount' => '76025',
            'currency' => '840',
            'ClientRef' => '000002700010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000002720010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '720010',
                'ReferenceNumber' => '000002720010',
                'OrderNumber' => '000002720010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '76021',
            'currency' => '840',
            'ClientRef' => '000002720010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000003250010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654000004',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '250010',
                'ReferenceNumber' => '000003250010',
                'OrderNumber' => '000003250010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDAwMDMyNTAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '13550',
            'currency' => '840',
            'ClientRef' => '000003250010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000003270010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654000004',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '270010',
                'ReferenceNumber' => '000003270010',
                'OrderNumber' => '000003270010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDAwMDMyNzAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '13552',
            'currency' => '840',
            'ClientRef' => '000003270010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000003290010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654000004',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '290010',
                'ReferenceNumber' => '000003290010',
                'OrderNumber' => '000003290010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '13542',
            'currency' => '840',
            'ClientRef' => '000003290010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000003310010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654000004',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '310010',
                'ReferenceNumber' => '000003310010',
                'OrderNumber' => '000003310010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '13544',
            'currency' => '840',
            'ClientRef' => '000003310010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000003330010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654000004',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '330010',
                'ReferenceNumber' => '000003330010',
                'OrderNumber' => '000003330010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '34011',
            'currency' => '840',
            'ClientRef' => '000003330010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000003350010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654000004',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '350010',
                'ReferenceNumber' => '000003350010',
                'OrderNumber' => '000003350010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '34015',
            'currency' => '840',
            'ClientRef' => '000003350010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138430010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '430010',
                'ReferenceNumber' => '000138430010',
                'OrderNumber' => '000138430010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '34206',
            'currency' => '840',
            'ClientRef' => '000138430010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138440010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '440010',
                'ReferenceNumber' => '000138440010',
                'OrderNumber' => '000138440010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '113610',
            'currency' => '840',
            'ClientRef' => '000138440010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138460010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '460010',
                'ReferenceNumber' => '000138460010',
                'OrderNumber' => '000138460010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '62207',
            'currency' => '840',
            'ClientRef' => '000138460010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138510010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '510010',
                'ReferenceNumber' => '000138510010',
                'OrderNumber' => '000138510010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '83211',
            'currency' => '840',
            'ClientRef' => '000138510010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138540010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '540010',
                'ReferenceNumber' => '000138540010',
                'OrderNumber' => '000138540010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '117022',
            'currency' => '840',
            'ClientRef' => '000138540010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138550010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '550010',
                'ReferenceNumber' => '000138550010',
                'OrderNumber' => '000138550010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '101209',
            'currency' => '840',
            'ClientRef' => '000138550010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138670010And000138670011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '670010',
                'ReferenceNumber' => '000138670010',
                'OrderNumber' => '000138670010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '55444',
            'currency' => '840',
            'ClientRef' => '000138670010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '670011',
                'ReferenceNumber' => '000138670011',
                'OrderNumber' => '000138670011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '27722',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '27722',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '27722',
            'currency' => '840',
            'ClientRef' => '000138670011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138680010And000138680011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680010',
                'ReferenceNumber' => '000138680010',
                'OrderNumber' => '000138680010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '34195',
            'currency' => '840',
            'ClientRef' => '000138680010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680011',
                'ReferenceNumber' => '000138680011',
                'OrderNumber' => '000138680011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34195',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34195',
            'currency' => '840',
            'ClientRef' => '000138680011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138690010And000138690011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '690010',
                'ReferenceNumber' => '000138690010',
                'OrderNumber' => '000138690010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'amount' => '14304',
            'currency' => '840',
            'ClientRef' => '000138690010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '690011',
                'ReferenceNumber' => '000138690011',
                'OrderNumber' => '000138690011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '14304',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '14304',
            'currency' => '840',
            'ClientRef' => '000138690011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138700010And000138700011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '700010',
                'ReferenceNumber' => '000138700010',
                'OrderNumber' => '000138700010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'amount' => '13562',
            'currency' => '840',
            'ClientRef' => '000138700010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '700011',
                'ReferenceNumber' => '000138700011',
                'OrderNumber' => '000138700011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '6778',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '6778',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '6778',
            'currency' => '840',
            'ClientRef' => '000138700011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138710010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '710010',
                'ReferenceNumber' => '000138710010',
                'OrderNumber' => '000138710010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDAxMzg3MTAwMTA=',
            ),
            'amount' => '13682',
            'currency' => '840',
            'ClientRef' => '000138710010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138750010And000138750011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '750010',
                'ReferenceNumber' => '000138750010',
                'OrderNumber' => '000138750010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '62195',
            'currency' => '840',
            'ClientRef' => '000138750010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '750011',
                'ReferenceNumber' => '000138750011',
                'OrderNumber' => '000138750011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '62099',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '62099',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '62099',
            'currency' => '840',
            'ClientRef' => '000138750011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138760010And000138760011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '760010',
                'ReferenceNumber' => '000138760010',
                'OrderNumber' => '000138760010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAxMzg3NjAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '14642',
            'currency' => '840',
            'ClientRef' => '000138760010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '760011',
                'ReferenceNumber' => '000138760011',
                'OrderNumber' => '000138760011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '14642',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '14642',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '14642',
            'currency' => '840',
            'ClientRef' => '000138760011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138770010And000138770011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '770010',
                'ReferenceNumber' => '000138770010',
                'OrderNumber' => '000138770010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAxMzg3NzAwMTA=',
            ),
            'amount' => '13804',
            'currency' => '840',
            'ClientRef' => '000138770010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '770011',
                'ReferenceNumber' => '000138770011',
                'OrderNumber' => '000138770011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '13804',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '13804',
            'currency' => '840',
            'ClientRef' => '000138770011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138780010And000138780011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '780010',
                'ReferenceNumber' => '000138780010',
                'OrderNumber' => '000138780010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAxMzg3ODAwMTA=',
            ),
            'amount' => '15040',
            'currency' => '840',
            'ClientRef' => '000138780010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '780011',
                'ReferenceNumber' => '000138780011',
                'OrderNumber' => '000138780011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '15040',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '15040',
            'currency' => '840',
            'ClientRef' => '000138780011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138790010And000138790011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '790010',
                'ReferenceNumber' => '000138790010',
                'OrderNumber' => '000138790010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAxMzg3OTAwMTA=',
            ),
            'amount' => '13848',
            'currency' => '840',
            'ClientRef' => '000138790010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '790011',
                'ReferenceNumber' => '000138790011',
                'OrderNumber' => '000138790011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '13845',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '13845',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '13845',
            'currency' => '840',
            'ClientRef' => '000138790011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138800010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '800010',
                'ReferenceNumber' => '000138800010',
                'OrderNumber' => '000138800010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAxMzg4MDAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '13718',
            'currency' => '840',
            'ClientRef' => '000138800010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138850010And000138850011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '850010',
                'ReferenceNumber' => '000138850010',
                'OrderNumber' => '000138850010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '850010',
            ),
            'amount' => '77190',
            'currency' => '840',
            'ClientRef' => '000138850010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '850011',
                'ReferenceNumber' => '000138850011',
                'OrderNumber' => '000138850011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38595',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38595',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38595',
            'currency' => '840',
            'ClientRef' => '000138850011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138860010And000138860011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '860010',
                'ReferenceNumber' => '000138860010',
                'OrderNumber' => '000138860010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '860010',
            ),
            'amount' => '14678',
            'currency' => '840',
            'ClientRef' => '000138860010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '860011',
                'ReferenceNumber' => '000138860011',
                'OrderNumber' => '000138860011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7339',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '7339',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7339',
            'currency' => '840',
            'ClientRef' => '000138860011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138870010And000138870011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '870010',
                'ReferenceNumber' => '000138870010',
                'OrderNumber' => '000138870010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1000138880010',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '870010',
            ),
            'amount' => '14194',
            'currency' => '840',
            'ClientRef' => '000138870010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '870011',
                'ReferenceNumber' => '000138870011',
                'OrderNumber' => '000138870011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '14194',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '14194',
            'currency' => '840',
            'ClientRef' => '000138870011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138880010And000138880011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '880010',
                'ReferenceNumber' => '000138880010',
                'OrderNumber' => '000138880010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '880010',
            ),
            'amount' => '15272',
            'currency' => '840',
            'ClientRef' => '000138880010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '880011',
                'ReferenceNumber' => '000138880011',
                'OrderNumber' => '000138880011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7636',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '7636',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7636',
            'currency' => '840',
            'ClientRef' => '000138880011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138900010And000138900011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '900010',
                'ReferenceNumber' => '000138900010',
                'OrderNumber' => '000138900010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '82952',
            'currency' => '840',
            'ClientRef' => '000138900010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '900011',
                'ReferenceNumber' => '000138900011',
                'OrderNumber' => '000138900011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '41476',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '41476',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '41476',
            'currency' => '840',
            'ClientRef' => '000138900011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000140170010And000140170011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '170010',
                'ReferenceNumber' => '000140170010',
                'OrderNumber' => '000140170010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '11314',
            'currency' => '840',
            'ClientRef' => '000140170010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '170011',
                'ReferenceNumber' => '000140170011',
                'OrderNumber' => '000140170011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '11314',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '11314',
            'currency' => '840',
            'ClientRef' => '000140170011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000140190010And000140190011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '190010',
                'ReferenceNumber' => '000140190010',
                'OrderNumber' => '000140190010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '12308',
            'currency' => '840',
            'ClientRef' => '000140190010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '190011',
                'ReferenceNumber' => '000140190011',
                'OrderNumber' => '000140190011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '12308',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '12308',
            'currency' => '840',
            'ClientRef' => '000140190011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180000010And000180000011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '000010',
                'ReferenceNumber' => '000180000010',
                'OrderNumber' => '000180000010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '84002',
            'currency' => '840',
            'ClientRef' => '000180000010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '000011',
                'ReferenceNumber' => '000180000011',
                'OrderNumber' => '000180000011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '84002',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '84002',
            'currency' => '840',
            'ClientRef' => '000180000011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180020010And000180020011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '020010',
                'ReferenceNumber' => '000180020010',
                'OrderNumber' => '000180020010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'amount' => '84202',
            'currency' => '840',
            'ClientRef' => '000180020010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '020011',
                'ReferenceNumber' => '000180020011',
                'OrderNumber' => '000180020011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '84202',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '84202',
            'currency' => '840',
            'ClientRef' => '000180020011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180070010And000180070011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4000020000000018',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '070010',
                'ReferenceNumber' => '000180070010',
                'OrderNumber' => '000180070010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '19602',
            'currency' => '840',
            'ClientRef' => '000180070010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4000020000000018',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '070011',
                'ReferenceNumber' => '000180070011',
                'OrderNumber' => '000180070011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '19602',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '19602',
            'currency' => '840',
            'ClientRef' => '000180070011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180090010And000180090011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4000020000000018',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '090010',
                'ReferenceNumber' => '000180090010',
                'OrderNumber' => '000180090010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'amount' => '19606',
            'currency' => '840',
            'ClientRef' => '000180090010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4000020000000018',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '090011',
                'ReferenceNumber' => '000180090011',
                'OrderNumber' => '000180090011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '19606',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '19606',
            'currency' => '840',
            'ClientRef' => '000180090011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180160010And000180160011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '160010',
                'ReferenceNumber' => '000180160010',
                'OrderNumber' => '000180160010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '34350',
            'currency' => '840',
            'ClientRef' => '000180160010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '160011',
                'ReferenceNumber' => '000180160011',
                'OrderNumber' => '000180160011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34350',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34350',
            'currency' => '840',
            'ClientRef' => '000180160011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180180010And000180180011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '180010',
                'ReferenceNumber' => '000180180010',
                'OrderNumber' => '000180180010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'amount' => '34550',
            'currency' => '840',
            'ClientRef' => '000180180010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '180011',
                'ReferenceNumber' => '000180180011',
                'OrderNumber' => '000180180011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34550',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34550',
            'currency' => '840',
            'ClientRef' => '000180180011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180250010And000180250011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6221280005638208',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '250010',
                'ReferenceNumber' => '000180250010',
                'OrderNumber' => '000180250010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '1602',
            'currency' => '840',
            'ClientRef' => '000180250010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6221280005638208',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '250011',
                'ReferenceNumber' => '000180250011',
                'OrderNumber' => '000180250011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '1602',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '1602',
            'currency' => '840',
            'ClientRef' => '000180250011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180270010And000180270011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6221280005638208',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '270010',
                'ReferenceNumber' => '000180270010',
                'OrderNumber' => '000180270010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'amount' => '2606',
            'currency' => '840',
            'ClientRef' => '000180270010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6221280005638208',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '270011',
                'ReferenceNumber' => '000180270011',
                'OrderNumber' => '000180270011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '2606',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '2606',
            'currency' => '840',
            'ClientRef' => '000180270011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180290010And000180290011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6221280005638208',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '290010',
                'ReferenceNumber' => '000180290010',
                'OrderNumber' => '000180290010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '2610',
            'currency' => '840',
            'ClientRef' => '000180290010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6221280005638208',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '290011',
                'ReferenceNumber' => '000180290011',
                'OrderNumber' => '000180290011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '2610',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '2610',
            'currency' => '840',
            'ClientRef' => '000180290011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186740010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '740010',
                'ReferenceNumber' => '000186740010',
                'OrderNumber' => '000186740010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'amount' => '7611',
            'currency' => '840',
            'ClientRef' => '000186740010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186750010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '750010',
                'ReferenceNumber' => '000186750010',
                'OrderNumber' => '000186750010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'amount' => '7609',
            'currency' => '840',
            'ClientRef' => '000186750010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186760010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '760010',
                'ReferenceNumber' => '000186760010',
                'OrderNumber' => '000186760010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '7605',
            'currency' => '840',
            'ClientRef' => '000186760010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186770010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '770010',
                'ReferenceNumber' => '000186770010',
                'OrderNumber' => '000186770010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '7603',
            'currency' => '840',
            'ClientRef' => '000186770010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186780010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '780010',
                'ReferenceNumber' => '000186780010',
                'OrderNumber' => '000186780010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '7619',
            'currency' => '840',
            'ClientRef' => '000186780010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186790010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '790010',
                'ReferenceNumber' => '000186790010',
                'OrderNumber' => '000186790010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '7615',
            'currency' => '840',
            'ClientRef' => '000186790010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186860010And000186860011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '860010',
                'ReferenceNumber' => '000186860010',
                'OrderNumber' => '000186860010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'amount' => '7607',
            'currency' => '840',
            'ClientRef' => '000186860010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '860011',
                'ReferenceNumber' => '000186860011',
                'OrderNumber' => '000186860011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7607',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '7607',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7607',
            'currency' => '840',
            'ClientRef' => '000186860011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186870010And000186870011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '870010',
                'ReferenceNumber' => '000186870010',
                'OrderNumber' => '000186870010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '7601',
            'currency' => '840',
            'ClientRef' => '000186870010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '870011',
                'ReferenceNumber' => '000186870011',
                'OrderNumber' => '000186870011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7601',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '7601',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7601',
            'currency' => '840',
            'ClientRef' => '000186870011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186880010And000186880011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '880010',
                'ReferenceNumber' => '000186880010',
                'OrderNumber' => '000186880010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '7617',
            'currency' => '840',
            'ClientRef' => '000186880010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '880011',
                'ReferenceNumber' => '000186880011',
                'OrderNumber' => '000186880011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7617',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '7617',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '02',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7617',
            'currency' => '840',
            'ClientRef' => '000186880011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000186890010And000186890011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '890010',
                'ReferenceNumber' => '000186890010',
                'OrderNumber' => '000186890010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '7613',
            'currency' => '840',
            'ClientRef' => '000186890010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '890011',
                'ReferenceNumber' => '000186890011',
                'OrderNumber' => '000186890011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7613',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '7613',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7613',
            'currency' => '840',
            'ClientRef' => '000186890011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235120010And000235120011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '120010',
                'ReferenceNumber' => '000235120010',
                'OrderNumber' => '000235120010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyMzUxMjAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '3661',
            'currency' => '840',
            'ClientRef' => '000235120010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TransactionInitiation' => 'Merchant',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '120011',
                'ReferenceNumber' => '000235120011',
                'OrderNumber' => '000235120011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '119',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyMzUxMjAwMTE=',
            ),
            'VisaGroup' => array(
                'AuthorizationCharacteristicsIndicator' => 'I',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '120011',
            ),
            'amount' => '119',
            'currency' => '840',
            'ClientRef' => '000235120011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235120012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '120012',
                'ReferenceNumber' => '000235120012',
                'OrderNumber' => '000235120012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '3780',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '3780',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '12001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '120012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '3780',
            'currency' => '840',
            'ClientRef' => '000235120012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235140010And000235140011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '140010',
                'ReferenceNumber' => '000235140010',
                'OrderNumber' => '000235140010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyMzUxNDAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '3662',
            'currency' => '840',
            'ClientRef' => '000235140010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TransactionInitiation' => 'Merchant',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '140011',
                'ReferenceNumber' => '000235140011',
                'OrderNumber' => '000235140011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '121',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyMzUxNDAwMTE=',
            ),
            'VisaGroup' => array(
                'AuthorizationCharacteristicsIndicator' => 'I',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '140011',
            ),
            'amount' => '121',
            'currency' => '840',
            'ClientRef' => '000235140011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235140012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '140012',
                'ReferenceNumber' => '000235140012',
                'OrderNumber' => '000235140012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '3783',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '3783',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '14001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '140012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '3783',
            'currency' => '840',
            'ClientRef' => '000235140012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235320010And000235320011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '320010',
                'ReferenceNumber' => '000235320010',
                'OrderNumber' => '000235320010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '2241',
            'currency' => '840',
            'ClientRef' => '000235320010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TransactionInitiation' => 'Merchant',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '320011',
                'ReferenceNumber' => '000235320011',
                'OrderNumber' => '000235320011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '319',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'VisaGroup' => array(
                'AuthorizationCharacteristicsIndicator' => 'I',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '320011',
            ),
            'amount' => '319',
            'currency' => '840',
            'ClientRef' => '000235320011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235320012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '320012',
                'ReferenceNumber' => '000235320012',
                'OrderNumber' => '000235320012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '2560',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '2560',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '32001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '320012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '2560',
            'currency' => '840',
            'ClientRef' => '000235320012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235340010And000235340011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '340010',
                'ReferenceNumber' => '000235340010',
                'OrderNumber' => '000235340010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '2243',
            'currency' => '840',
            'ClientRef' => '000235340010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TransactionInitiation' => 'Merchant',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '340011',
                'ReferenceNumber' => '000235340011',
                'OrderNumber' => '000235340011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '322',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'VisaGroup' => array(
                'AuthorizationCharacteristicsIndicator' => 'I',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '340011',
            ),
            'amount' => '322',
            'currency' => '840',
            'ClientRef' => '000235340011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235340012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '340012',
                'ReferenceNumber' => '000235340012',
                'OrderNumber' => '000235340012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '2565',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '2565',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '34001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '340012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '2565',
            'currency' => '840',
            'ClientRef' => '000235340012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000236020010And000236020011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '020010',
                'ReferenceNumber' => '000236020010',
                'OrderNumber' => '000236020010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '020010',
            ),
            'amount' => '3661',
            'currency' => '840',
            'ClientRef' => '000236020010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '020011',
                'ReferenceNumber' => '000236020011',
                'OrderNumber' => '000236020011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '020011',
            ),
            'amount' => '119',
            'currency' => '840',
            'ClientRef' => '000236020011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000236020012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '020012',
                'ReferenceNumber' => '000236020012',
                'OrderNumber' => '000236020012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '3780',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '3780',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '02001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '020012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '3780',
            'currency' => '840',
            'ClientRef' => '000236020012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000236040010And000236040011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '040010',
                'ReferenceNumber' => '000236040010',
                'OrderNumber' => '000236040010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '040010',
            ),
            'amount' => '3662',
            'currency' => '840',
            'ClientRef' => '000236040010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '040011',
                'ReferenceNumber' => '000236040011',
                'OrderNumber' => '000236040011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '040011',
            ),
            'amount' => '121',
            'currency' => '840',
            'ClientRef' => '000236040011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000236040012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '040012',
                'ReferenceNumber' => '000236040012',
                'OrderNumber' => '000236040012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '3783',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '3783',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '04001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '040012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '3783',
            'currency' => '840',
            'ClientRef' => '000236040012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000236220010And000236220011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '220010',
                'ReferenceNumber' => '000236220010',
                'OrderNumber' => '000236220010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '220010',
            ),
            'amount' => '2241',
            'currency' => '840',
            'ClientRef' => '000236220010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '220011',
                'ReferenceNumber' => '000236220011',
                'OrderNumber' => '000236220011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '220011',
            ),
            'amount' => '319',
            'currency' => '840',
            'ClientRef' => '000236220011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000236220012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '220012',
                'ReferenceNumber' => '000236220012',
                'OrderNumber' => '000236220012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '2560',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '2560',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '22001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '220012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '2560',
            'currency' => '840',
            'ClientRef' => '000236220012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000236240010And000236240011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '240010',
                'ReferenceNumber' => '000236240010',
                'OrderNumber' => '000236240010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '240010',
            ),
            'amount' => '2243',
            'currency' => '840',
            'ClientRef' => '000236240010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '240011',
                'ReferenceNumber' => '000236240011',
                'OrderNumber' => '000236240011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '240011',
            ),
            'amount' => '322',
            'currency' => '840',
            'ClientRef' => '000236240011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000236240012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '240012',
                'ReferenceNumber' => '000236240012',
                'OrderNumber' => '000236240012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '2565',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '2565',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '24001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '240012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '2565',
            'currency' => '840',
            'ClientRef' => '000236240012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246520010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '520010',
                'ReferenceNumber' => '000246520010',
                'OrderNumber' => '000246520010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyNDY1MjAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '000',
            'currency' => '840',
            'ClientRef' => '000246520010',
        );

        // Act
        $request = $gateway->verification($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246530010And000246530011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '530010',
                'ReferenceNumber' => '000246530010',
                'OrderNumber' => '000246530010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyNDY1MzAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21000',
            'currency' => '840',
            'ClientRef' => '000246530010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '530011',
                'ReferenceNumber' => '000246530011',
                'OrderNumber' => '000246530011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21000',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '21000',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21000',
            'currency' => '840',
            'ClientRef' => '000246530011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246540010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '540010',
                'ReferenceNumber' => '000246540010',
                'OrderNumber' => '000246540010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21001',
            'currency' => '840',
            'ClientRef' => '000246540010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246550010And000246550011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '550010',
                'ReferenceNumber' => '000246550010',
                'OrderNumber' => '000246550010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyNDY1NTAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21002',
            'currency' => '840',
            'ClientRef' => '000246550010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '550011',
                'ReferenceNumber' => '000246550011',
                'OrderNumber' => '000246550011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21002',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21002',
            'currency' => '840',
            'ClientRef' => '000246550011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246570010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '570010',
                'ReferenceNumber' => '000246570010',
                'OrderNumber' => '000246570010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyNDY1NzAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21004',
            'currency' => '840',
            'ClientRef' => '000246570010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246580010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '580010',
                'ReferenceNumber' => '000246580010',
                'OrderNumber' => '000246580010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21005',
            'currency' => '840',
            'ClientRef' => '000246580010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246590010And000246590011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '590010',
                'ReferenceNumber' => '000246590010',
                'OrderNumber' => '000246590010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyNDY1OTAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21006',
            'currency' => '840',
            'ClientRef' => '000246590010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '590011',
                'ReferenceNumber' => '000246590011',
                'OrderNumber' => '000246590011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21006',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21006',
            'currency' => '840',
            'ClientRef' => '000246590011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246660010And000246660011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '660010',
                'ReferenceNumber' => '000246660010',
                'OrderNumber' => '000246660010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyNDY2NjAwMTA=',
            ),
            'amount' => '21013',
            'currency' => '840',
            'ClientRef' => '000246660010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '660011',
                'ReferenceNumber' => '000246660011',
                'OrderNumber' => '000246660011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21013',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '21013',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21013',
            'currency' => '840',
            'ClientRef' => '000246660011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246670010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '670010',
                'ReferenceNumber' => '000246670010',
                'OrderNumber' => '000246670010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21014',
            'currency' => '840',
            'ClientRef' => '000246670010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246680010And000246680011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680010',
                'ReferenceNumber' => '000246680010',
                'OrderNumber' => '000246680010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyNDY2ODAwMTA=',
            ),
            'amount' => '21015',
            'currency' => '840',
            'ClientRef' => '000246680010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680011',
                'ReferenceNumber' => '000246680011',
                'OrderNumber' => '000246680011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21015',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21015',
            'currency' => '840',
            'ClientRef' => '000246680011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246700010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '700010',
                'ReferenceNumber' => '000246700010',
                'OrderNumber' => '000246700010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyNDY3MDAwMTA=',
            ),
            'amount' => '21017',
            'currency' => '840',
            'ClientRef' => '000246700010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246710010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '710010',
                'ReferenceNumber' => '000246710010',
                'OrderNumber' => '000246710010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21017',
            'currency' => '840',
            'ClientRef' => '000246710010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246720010And000246720011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '720010',
                'ReferenceNumber' => '000246720010',
                'OrderNumber' => '000246720010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDAyNDY3MjAwMTA=',
            ),
            'amount' => '21018',
            'currency' => '840',
            'ClientRef' => '000246720010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '720011',
                'ReferenceNumber' => '000246720011',
                'OrderNumber' => '000246720011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21018',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21018',
            'currency' => '840',
            'ClientRef' => '000246720011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247070010And000247070011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '070010',
                'ReferenceNumber' => '000247070010',
                'OrderNumber' => '000247070010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21025',
            'currency' => '840',
            'ClientRef' => '000247070010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '070011',
                'ReferenceNumber' => '000247070011',
                'OrderNumber' => '000247070011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21025',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '21025',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21025',
            'currency' => '840',
            'ClientRef' => '000247070011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247080010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '080010',
                'ReferenceNumber' => '000247080010',
                'OrderNumber' => '000247080010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21026',
            'currency' => '840',
            'ClientRef' => '000247080010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247090010And000247090011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '090010',
                'ReferenceNumber' => '000247090010',
                'OrderNumber' => '000247090010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21027',
            'currency' => '840',
            'ClientRef' => '000247090010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '090011',
                'ReferenceNumber' => '000247090011',
                'OrderNumber' => '000247090011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21027',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21027',
            'currency' => '840',
            'ClientRef' => '000247090011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247110010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '110010',
                'ReferenceNumber' => '000247110010',
                'OrderNumber' => '000247110010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21029',
            'currency' => '840',
            'ClientRef' => '000247110010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247120010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '120010',
                'ReferenceNumber' => '000247120010',
                'OrderNumber' => '000247120010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21030',
            'currency' => '840',
            'ClientRef' => '000247120010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247130010And000247130011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '130010',
                'ReferenceNumber' => '000247130010',
                'OrderNumber' => '000247130010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21031',
            'currency' => '840',
            'ClientRef' => '000247130010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '130011',
                'ReferenceNumber' => '000247130011',
                'OrderNumber' => '000247130011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21031',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21031',
            'currency' => '840',
            'ClientRef' => '000247130011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247200010And000247200011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '200010',
                'ReferenceNumber' => '000247200010',
                'OrderNumber' => '000247200010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21038',
            'currency' => '840',
            'ClientRef' => '000247200010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '200011',
                'ReferenceNumber' => '000247200011',
                'OrderNumber' => '000247200011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21038',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '21038',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21038',
            'currency' => '840',
            'ClientRef' => '000247200011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247210010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '210010',
                'ReferenceNumber' => '000247210010',
                'OrderNumber' => '000247210010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21039',
            'currency' => '840',
            'ClientRef' => '000247210010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247220010And000247220011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '220010',
                'ReferenceNumber' => '000247220010',
                'OrderNumber' => '000247220010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21040',
            'currency' => '840',
            'ClientRef' => '000247220010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '220011',
                'ReferenceNumber' => '000247220011',
                'OrderNumber' => '000247220011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21040',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21040',
            'currency' => '840',
            'ClientRef' => '000247220011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247240010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '240010',
                'ReferenceNumber' => '000247240010',
                'OrderNumber' => '000247240010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21042',
            'currency' => '840',
            'ClientRef' => '000247240010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247250010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '250010',
                'ReferenceNumber' => '000247250010',
                'OrderNumber' => '000247250010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21043',
            'currency' => '840',
            'ClientRef' => '000247250010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000247260010And000247260011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '260010',
                'ReferenceNumber' => '000247260010',
                'OrderNumber' => '000247260010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '21044',
            'currency' => '840',
            'ClientRef' => '000247260010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '260011',
                'ReferenceNumber' => '000247260011',
                'OrderNumber' => '000247260011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21044',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21044',
            'currency' => '840',
            'ClientRef' => '000247260011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000524650010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '650010',
                'ReferenceNumber' => '000524650010',
                'OrderNumber' => '000524650010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '55444',
            'currency' => '840',
            'ClientRef' => '000524650010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000524680010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680010',
                'ReferenceNumber' => '000524680010',
                'OrderNumber' => '000524680010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '55032',
            'currency' => '840',
            'ClientRef' => '000524680010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000524690010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '690010',
                'ReferenceNumber' => '000524690010',
                'OrderNumber' => '000524690010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '35078',
            'currency' => '840',
            'ClientRef' => '000524690010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000524830010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '830010',
                'ReferenceNumber' => '000524830010',
                'OrderNumber' => '000524830010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDA1MjQ4MzAwMTA=',
            ),
            'amount' => '13584',
            'currency' => '840',
            'ClientRef' => '000524830010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000524840010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '840010',
                'ReferenceNumber' => '000524840010',
                'OrderNumber' => '000524840010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDA1MjQ4NDAwMTA=',
            ),
            'amount' => '13586',
            'currency' => '840',
            'ClientRef' => '000524840010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000524860010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '860010',
                'ReferenceNumber' => '000524860010',
                'OrderNumber' => '000524860010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDA1MjQ4NjAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '113626',
            'currency' => '840',
            'ClientRef' => '000524860010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000524890010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '890010',
                'ReferenceNumber' => '000524890010',
                'OrderNumber' => '000524890010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDA1MjQ4OTAwMTA=',
            ),
            'amount' => '14930',
            'currency' => '840',
            'ClientRef' => '000524890010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000524900010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '900010',
                'ReferenceNumber' => '000524900010',
                'OrderNumber' => '000524900010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDA1MjQ5MDAwMTA=',
            ),
            'amount' => '14932',
            'currency' => '840',
            'ClientRef' => '000524900010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000524930010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '379605177111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '930010',
                'ReferenceNumber' => '000524930010',
                'OrderNumber' => '000524930010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDA1MjQ5MzAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '115028',
            'currency' => '840',
            'ClientRef' => '000524930010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000525110010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '110010',
                'ReferenceNumber' => '000525110010',
                'OrderNumber' => '000525110010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '62880',
            'currency' => '840',
            'ClientRef' => '000525110010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000525170010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '170010',
                'ReferenceNumber' => '000525170010',
                'OrderNumber' => '000525170010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDA1MjUxNzAwMTA=',
            ),
            'amount' => '13858',
            'currency' => '840',
            'ClientRef' => '000525170010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000525190010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '190010',
                'ReferenceNumber' => '000525190010',
                'OrderNumber' => '000525190010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDA1MjUxOTAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '15228',
            'currency' => '840',
            'ClientRef' => '000525190010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000525740010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '740010',
                'ReferenceNumber' => '000525740010',
                'OrderNumber' => '000525740010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '76890',
            'currency' => '840',
            'ClientRef' => '000525740010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000525770010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '770010',
                'ReferenceNumber' => '000525770010',
                'OrderNumber' => '000525770010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '76684',
            'currency' => '840',
            'ClientRef' => '000525770010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000525780010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '780010',
                'ReferenceNumber' => '000525780010',
                'OrderNumber' => '000525780010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '84786',
            'currency' => '840',
            'ClientRef' => '000525780010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000525980010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '980010',
                'ReferenceNumber' => '000525980010',
                'OrderNumber' => '000525980010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '14052',
            'currency' => '840',
            'ClientRef' => '000525980010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000525990010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '990010',
                'ReferenceNumber' => '000525990010',
                'OrderNumber' => '000525990010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '14054',
            'currency' => '840',
            'ClientRef' => '000525990010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000526010010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '010010',
                'ReferenceNumber' => '000526010010',
                'OrderNumber' => '000526010010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '114100',
            'currency' => '840',
            'ClientRef' => '000526010010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000526050010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '050010',
                'ReferenceNumber' => '000526050010',
                'OrderNumber' => '000526050010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '15282',
            'currency' => '840',
            'ClientRef' => '000526050010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000526060010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '060010',
                'ReferenceNumber' => '000526060010',
                'OrderNumber' => '000526060010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '15284',
            'currency' => '840',
            'ClientRef' => '000526060010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000526080010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '080010',
                'ReferenceNumber' => '000526080010',
                'OrderNumber' => '000526080010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '115306',
            'currency' => '840',
            'ClientRef' => '000526080010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000527770010And000527770011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '770010',
                'ReferenceNumber' => '000527770010',
                'OrderNumber' => '000527770010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '55342',
            'currency' => '840',
            'ClientRef' => '000527770010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '770011',
                'ReferenceNumber' => '000527770011',
                'OrderNumber' => '000527770011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '27671',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '27671',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '27671',
            'currency' => '840',
            'ClientRef' => '000527770011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000527780010And000527780011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '780010',
                'ReferenceNumber' => '000527780010',
                'OrderNumber' => '000527780010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '55034',
            'currency' => '840',
            'ClientRef' => '000527780010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '780011',
                'ReferenceNumber' => '000527780011',
                'OrderNumber' => '000527780011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '27517',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '27517',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '27517',
            'currency' => '840',
            'ClientRef' => '000527780011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000527800010And000527800011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '379605177111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '800010',
                'ReferenceNumber' => '000527800010',
                'OrderNumber' => '000527800010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '35264',
            'currency' => '840',
            'ClientRef' => '000527800010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605177111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '800011',
                'ReferenceNumber' => '000527800011',
                'OrderNumber' => '000527800011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '35261',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '35261',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '35261',
            'currency' => '840',
            'ClientRef' => '000527800011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000527980010And000527980011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '379605177111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '980010',
                'ReferenceNumber' => '000527980010',
                'OrderNumber' => '000527980010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDA1Mjc5ODAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '115008',
            'currency' => '840',
            'ClientRef' => '000527980010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605177111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '980011',
                'ReferenceNumber' => '000527980011',
                'OrderNumber' => '000527980011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '115008',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '115008',
            'currency' => '840',
            'ClientRef' => '000527980011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000527990010And000527990011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '990010',
                'ReferenceNumber' => '000527990010',
                'OrderNumber' => '000527990010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'AmexSecureData' => 'MDAwMDAwMDAwMDA1Mjc5OTAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '113526',
            'currency' => '840',
            'ClientRef' => '000527990010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '990011',
                'ReferenceNumber' => '000527990011',
                'OrderNumber' => '000527990011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '113526',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '113526',
            'currency' => '840',
            'ClientRef' => '000527990011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000528150010And000528150011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '150010',
                'ReferenceNumber' => '000528150010',
                'OrderNumber' => '000528150010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '34153',
            'currency' => '840',
            'ClientRef' => '000528150010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '150011',
                'ReferenceNumber' => '000528150011',
                'OrderNumber' => '000528150011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34153',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34153',
            'currency' => '840',
            'ClientRef' => '000528150011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000528160010And000528160011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '160010',
                'ReferenceNumber' => '000528160010',
                'OrderNumber' => '000528160010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '34689',
            'currency' => '840',
            'ClientRef' => '000528160010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '160011',
                'ReferenceNumber' => '000528160011',
                'OrderNumber' => '000528160011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34689',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34689',
            'currency' => '840',
            'ClientRef' => '000528160011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000528660010And000528660011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '660010',
                'ReferenceNumber' => '000528660010',
                'OrderNumber' => '000528660010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '57311',
            'currency' => '840',
            'ClientRef' => '000528660010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '660011',
                'ReferenceNumber' => '000528660011',
                'OrderNumber' => '000528660011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '57311',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '57311',
            'currency' => '840',
            'ClientRef' => '000528660011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000528670010And000528670011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '670010',
                'ReferenceNumber' => '000528670010',
                'OrderNumber' => '000528670010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '62988',
            'currency' => '840',
            'ClientRef' => '000528670010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '670011',
                'ReferenceNumber' => '000528670011',
                'OrderNumber' => '000528670011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '62877',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '62877',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '62877',
            'currency' => '840',
            'ClientRef' => '000528670011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000528680010And000528680011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680010',
                'ReferenceNumber' => '000528680010',
                'OrderNumber' => '000528680010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '57207',
            'currency' => '840',
            'ClientRef' => '000528680010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680011',
                'ReferenceNumber' => '000528680011',
                'OrderNumber' => '000528680011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '57207',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '57207',
            'currency' => '840',
            'ClientRef' => '000528680011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000528820010And000528820011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '820010',
                'ReferenceNumber' => '000528820010',
                'OrderNumber' => '000528820010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDA1Mjg4MjAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '15146',
            'currency' => '840',
            'ClientRef' => '000528820010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '820011',
                'ReferenceNumber' => '000528820011',
                'OrderNumber' => '000528820011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '15146',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '15146',
            'currency' => '840',
            'ClientRef' => '000528820011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000528830010And000528830011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '830010',
                'ReferenceNumber' => '000528830010',
                'OrderNumber' => '000528830010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDA1Mjg4MzAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '15236',
            'currency' => '840',
            'ClientRef' => '000528830010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '830011',
                'ReferenceNumber' => '000528830011',
                'OrderNumber' => '000528830011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '15236',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '15236',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '15236',
            'currency' => '840',
            'ClientRef' => '000528830011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000528950010And000528950011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '950010',
                'ReferenceNumber' => '000528950010',
                'OrderNumber' => '000528950010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '57711',
            'currency' => '840',
            'ClientRef' => '000528950010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '950011',
                'ReferenceNumber' => '000528950011',
                'OrderNumber' => '000528950011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '57711',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '57711',
            'currency' => '840',
            'ClientRef' => '000528950011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000528960010And000528960011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '960010',
                'ReferenceNumber' => '000528960010',
                'OrderNumber' => '000528960010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '57208',
            'currency' => '840',
            'ClientRef' => '000528960010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '960011',
                'ReferenceNumber' => '000528960011',
                'OrderNumber' => '000528960011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '57208',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '57208',
            'currency' => '840',
            'ClientRef' => '000528960011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529010010And000529010011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '010010',
                'ReferenceNumber' => '000529010010',
                'OrderNumber' => '000529010010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'SecureTransactionGroup' => array(
                'VisaSecureTransactionAuthenticationData' => 'MDAwMDAwMDAwMDA1MjkwMTAwMTA=',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '15132',
            'currency' => '840',
            'ClientRef' => '000529010010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '010011',
                'ReferenceNumber' => '000529010011',
                'OrderNumber' => '000529010011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '15132',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '15132',
            'currency' => '840',
            'ClientRef' => '000529010011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529600010And000529600011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '600010',
                'ReferenceNumber' => '000529600010',
                'OrderNumber' => '000529600010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '600010',
            ),
            'amount' => '77292',
            'currency' => '840',
            'ClientRef' => '000529600010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '600011',
                'ReferenceNumber' => '000529600011',
                'OrderNumber' => '000529600011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38646',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38646',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38646',
            'currency' => '840',
            'ClientRef' => '000529600011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529610010And000529610011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '610010',
                'ReferenceNumber' => '000529610010',
                'OrderNumber' => '000529610010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '610010',
            ),
            'amount' => '76882',
            'currency' => '840',
            'ClientRef' => '000529610010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '610011',
                'ReferenceNumber' => '000529610011',
                'OrderNumber' => '000529610011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38441',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38441',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38441',
            'currency' => '840',
            'ClientRef' => '000529610011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529630010And000529630011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '630010',
                'ReferenceNumber' => '000529630010',
                'OrderNumber' => '000529630010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '630010',
            ),
            'amount' => '84794',
            'currency' => '840',
            'ClientRef' => '000529630010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '630011',
                'ReferenceNumber' => '000529630011',
                'OrderNumber' => '000529630011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '84794',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '84794',
            'currency' => '840',
            'ClientRef' => '000529630011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529650010And000529650011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '650010',
                'ReferenceNumber' => '000529650010',
                'OrderNumber' => '000529650010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '650010',
            ),
            'amount' => '76884',
            'currency' => '840',
            'ClientRef' => '000529650010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '650011',
                'ReferenceNumber' => '000529650011',
                'OrderNumber' => '000529650011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38442',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38442',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38442',
            'currency' => '840',
            'ClientRef' => '000529650011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529890010And000529890011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '890010',
                'ReferenceNumber' => '000529890010',
                'OrderNumber' => '000529890010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '890010',
            ),
            'amount' => '15464',
            'currency' => '840',
            'ClientRef' => '000529890010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '890011',
                'ReferenceNumber' => '000529890011',
                'OrderNumber' => '000529890011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '15464',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '15464',
            'currency' => '840',
            'ClientRef' => '000529890011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529900010And000529900011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '900010',
                'ReferenceNumber' => '000529900010',
                'OrderNumber' => '000529900010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '900010',
            ),
            'amount' => '15462',
            'currency' => '840',
            'ClientRef' => '000529900010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '900011',
                'ReferenceNumber' => '000529900011',
                'OrderNumber' => '000529900011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '15462',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '15462',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '15462',
            'currency' => '840',
            'ClientRef' => '000529900011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529910010And000529910011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '910010',
                'ReferenceNumber' => '000529910010',
                'OrderNumber' => '000529910010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '910010',
            ),
            'amount' => '14040',
            'currency' => '840',
            'ClientRef' => '000529910010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '910011',
                'ReferenceNumber' => '000529910011',
                'OrderNumber' => '000529910011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7020',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '7020',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7020',
            'currency' => '840',
            'ClientRef' => '000529910011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529920010And000529920011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '920010',
                'ReferenceNumber' => '000529920010',
                'OrderNumber' => '000529920010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '920010',
            ),
            'amount' => '114094',
            'currency' => '840',
            'ClientRef' => '000529920010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '920011',
                'ReferenceNumber' => '000529920011',
                'OrderNumber' => '000529920011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '57047',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '57047',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '57047',
            'currency' => '840',
            'ClientRef' => '000529920011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529950010And000529950011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '950010',
                'ReferenceNumber' => '000529950010',
                'OrderNumber' => '000529950010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '950010',
            ),
            'amount' => '115294',
            'currency' => '840',
            'ClientRef' => '000529950010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '950011',
                'ReferenceNumber' => '000529950011',
                'OrderNumber' => '000529950011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '57647',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '57647',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '57647',
            'currency' => '840',
            'ClientRef' => '000529950011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000529990010And000529990011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '990010',
                'ReferenceNumber' => '000529990010',
                'OrderNumber' => '000529990010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '990010',
            ),
            'amount' => '14042',
            'currency' => '840',
            'ClientRef' => '000529990010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '990011',
                'ReferenceNumber' => '000529990011',
                'OrderNumber' => '000529990011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7018',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '7018',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '01',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7018',
            'currency' => '840',
            'ClientRef' => '000529990011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000530100010And000530100011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '100010',
                'ReferenceNumber' => '000530100010',
                'OrderNumber' => '000530100010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '82794',
            'currency' => '840',
            'ClientRef' => '000530100010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '100011',
                'ReferenceNumber' => '000530100011',
                'OrderNumber' => '000530100011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '82794',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '82794',
            'currency' => '840',
            'ClientRef' => '000530100011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000530120010And000530120011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '120010',
                'ReferenceNumber' => '000530120010',
                'OrderNumber' => '000530120010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '76982',
            'currency' => '840',
            'ClientRef' => '000530120010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '120011',
                'ReferenceNumber' => '000530120011',
                'OrderNumber' => '000530120011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38491',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38491',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38491',
            'currency' => '840',
            'ClientRef' => '000530120011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000534520010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '520010',
                'ReferenceNumber' => '000534520010',
                'OrderNumber' => '000534520010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '11124',
            'currency' => '840',
            'ClientRef' => '000534520010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000534530010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '530010',
                'ReferenceNumber' => '000534530010',
                'OrderNumber' => '000534530010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '11126',
            'currency' => '840',
            'ClientRef' => '000534530010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000534620010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '620010',
                'ReferenceNumber' => '000534620010',
                'OrderNumber' => '000534620010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '11750',
            'currency' => '840',
            'ClientRef' => '000534620010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000534770010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '770010',
                'ReferenceNumber' => '000534770010',
                'OrderNumber' => '000534770010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '11956',
            'currency' => '840',
            'ClientRef' => '000534770010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000534780010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '780010',
                'ReferenceNumber' => '000534780010',
                'OrderNumber' => '000534780010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '11958',
            'currency' => '840',
            'ClientRef' => '000534780010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000550550010And000550550011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281500003339',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '550010',
                'ReferenceNumber' => '000550550010',
                'OrderNumber' => '000550550010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '260301',
            'currency' => '840',
            'ClientRef' => '000550550010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('P', $response->getAVSResultCode());
            $this->assertEquals('NotPrt', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281500003339',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '550011',
                'ReferenceNumber' => '000550550011',
                'OrderNumber' => '000550550011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'P',
                'CCVResultCode' => 'NotPrt',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '260298',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '260298',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '260298',
            'currency' => '840',
            'ClientRef' => '000550550011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000551810010And000551810011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '379605175555555',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '810010',
                'ReferenceNumber' => '000551810010',
                'OrderNumber' => '000551810010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '247401',
            'currency' => '840',
            'ClientRef' => '000551810010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('U', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605175555555',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '810011',
                'ReferenceNumber' => '000551810011',
                'OrderNumber' => '000551810011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'U',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '247398',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '247398',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '247398',
            'currency' => '840',
            'ClientRef' => '000551810011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000551820010And000551820011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '379605177777777',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '820010',
                'ReferenceNumber' => '000551820010',
                'OrderNumber' => '000551820010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '247500',
            'currency' => '840',
            'ClientRef' => '000551820010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('U', $response->getAVSResultCode());
            $this->assertEquals('NoMtch', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605177777777',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '820011',
                'ReferenceNumber' => '000551820011',
                'OrderNumber' => '000551820011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'U',
                'CCVResultCode' => 'NoMtch',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '247497',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '247497',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '247497',
            'currency' => '840',
            'ClientRef' => '000551820011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000552070010And000552070011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011361000000000',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '070010',
                'ReferenceNumber' => '000552070010',
                'OrderNumber' => '000552070010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '273700',
            'currency' => '840',
            'ClientRef' => '000552070010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('N', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000000000',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '070011',
                'ReferenceNumber' => '000552070011',
                'OrderNumber' => '000552070011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'N',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '273697',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '273697',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '273697',
            'currency' => '840',
            'ClientRef' => '000552070011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000552080010And000552080011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011361000000000',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '080010',
                'ReferenceNumber' => '000552080010',
                'OrderNumber' => '000552080010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '273701',
            'currency' => '840',
            'ClientRef' => '000552080010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('N', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000000000',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '080011',
                'ReferenceNumber' => '000552080011',
                'OrderNumber' => '000552080011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'N',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '273698',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '273698',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '273698',
            'currency' => '840',
            'ClientRef' => '000552080011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000555470010And000555470011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '378730000111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '470010',
                'ReferenceNumber' => '000555470010',
                'OrderNumber' => '000555470010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '11310',
            'currency' => '840',
            'ClientRef' => '000555470010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '378730000111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '470011',
                'ReferenceNumber' => '000555470011',
                'OrderNumber' => '000555470011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '11310',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '11310',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '11310',
            'currency' => '840',
            'ClientRef' => '000555470011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000555480010And000555480011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '378730000111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '480010',
                'ReferenceNumber' => '000555480010',
                'OrderNumber' => '000555480010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '11180',
            'currency' => '840',
            'ClientRef' => '000555480010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '378730000111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '480011',
                'ReferenceNumber' => '000555480011',
                'OrderNumber' => '000555480011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '11180',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '11180',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '11180',
            'currency' => '840',
            'ClientRef' => '000555480011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000556670010And000556670011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '670010',
                'ReferenceNumber' => '000556670010',
                'OrderNumber' => '000556670010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '11922',
            'currency' => '840',
            'ClientRef' => '000556670010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '670011',
                'ReferenceNumber' => '000556670011',
                'OrderNumber' => '000556670011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '11922',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '11922',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '11922',
            'currency' => '840',
            'ClientRef' => '000556670011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000556680010And000556680011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '4055011111111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680010',
                'ReferenceNumber' => '000556680010',
                'OrderNumber' => '000556680010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '11364',
            'currency' => '840',
            'ClientRef' => '000556680010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4055011111111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '680011',
                'ReferenceNumber' => '000556680011',
                'OrderNumber' => '000556680011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '11364',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '11364',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '11364',
            'currency' => '840',
            'ClientRef' => '000556680011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000557910010And000557910011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '910010',
                'ReferenceNumber' => '000557910010',
                'OrderNumber' => '000557910010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '910010',
            ),
            'amount' => '12216',
            'currency' => '840',
            'ClientRef' => '000557910010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '910011',
                'ReferenceNumber' => '000557910011',
                'OrderNumber' => '000557910011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '12216',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '12216',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '12216',
            'currency' => '840',
            'ClientRef' => '000557910011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000557920010And000557920011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '920010',
                'ReferenceNumber' => '000557920010',
                'OrderNumber' => '000557920010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '920010',
            ),
            'amount' => '12004',
            'currency' => '840',
            'ClientRef' => '000557920010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '920011',
                'ReferenceNumber' => '000557920011',
                'OrderNumber' => '000557920011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '12004',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '12004',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '12004',
            'currency' => '840',
            'ClientRef' => '000557920011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000558850010And000558850011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '850010',
                'ReferenceNumber' => '000558850010',
                'OrderNumber' => '000558850010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '12690',
            'currency' => '840',
            'ClientRef' => '000558850010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '850011',
                'ReferenceNumber' => '000558850011',
                'OrderNumber' => '000558850011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '12690',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '12690',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '12690',
            'currency' => '840',
            'ClientRef' => '000558850011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000558860010And000558860011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_ECOMM'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_ECOMM'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '860010',
                'ReferenceNumber' => '000558860010',
                'OrderNumber' => '000558860010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'amount' => '11058',
            'currency' => '840',
            'ClientRef' => '000558860010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '59',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5965',
                'STAN' => '860011',
                'ReferenceNumber' => '000558860011',
                'OrderNumber' => '000558860011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '11058',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '11058',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'EcommURL' => 'google.com',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '11058',
            'currency' => '840',
            'ClientRef' => '000558860011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000003950010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '950010',
                'ReferenceNumber' => '000003950010',
                'OrderNumber' => '000003950010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '64522',
            'currency' => '840',
            'ClientRef' => '000003950010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000003980010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264280001234559',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '980010',
                'ReferenceNumber' => '000003980010',
                'OrderNumber' => '000003980010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '30144',
            'currency' => '840',
            'ClientRef' => '000003980010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000005700010And000005700011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '700010',
                'ReferenceNumber' => '000005700010',
                'OrderNumber' => '000005700010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '111968',
            'currency' => '840',
            'ClientRef' => '000005700010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '700011',
                'ReferenceNumber' => '000005700011',
                'OrderNumber' => '000005700011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '111968',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '111968',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                //'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '111868',
            'currency' => '840',
            'ClientRef' => '000005700011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000026940010And000026940011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '940010',
                'ReferenceNumber' => '000026940010',
                'OrderNumber' => '000026940010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '8280',
            'currency' => '840',
            'ClientRef' => '000026940010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '940011',
                'ReferenceNumber' => '000026940011',
                'OrderNumber' => '000026940011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '8280',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '8280',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '8280',
            'currency' => '840',
            'ClientRef' => '000026940011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000027000010And000027000011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5405001111111165',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '000010',
                'ReferenceNumber' => '000027000010',
                'OrderNumber' => '000027000010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '000010',
            ),
            'amount' => '8282',
            'currency' => '840',
            'ClientRef' => '000027000010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5405001111111165',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '000011',
                'ReferenceNumber' => '000027000011',
                'OrderNumber' => '000027000011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '8282',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '8282',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '8282',
            'currency' => '840',
            'ClientRef' => '000027000011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138120010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '120010',
                'ReferenceNumber' => '000138120010',
                'OrderNumber' => '000138120010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '83256',
            'currency' => '840',
            'ClientRef' => '000138120010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('N', $response->getAVSResultCode());
            $this->assertEquals('NoMtch', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138130010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '130010',
                'ReferenceNumber' => '000138130010',
                'OrderNumber' => '000138130010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '83297',
            'currency' => '840',
            'ClientRef' => '000138130010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138150010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '150010',
                'ReferenceNumber' => '000138150010',
                'OrderNumber' => '000138150010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '34281',
            'currency' => '840',
            'ClientRef' => '000138150010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138170010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '170010',
                'ReferenceNumber' => '000138170010',
                'OrderNumber' => '000138170010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '101283',
            'currency' => '840',
            'ClientRef' => '000138170010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138210010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '210010',
                'ReferenceNumber' => '000138210010',
                'OrderNumber' => '000138210010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '62266',
            'currency' => '840',
            'ClientRef' => '000138210010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138230010And000138230011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '230010',
                'ReferenceNumber' => '000138230010',
                'OrderNumber' => '000138230010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '57211',
            'currency' => '840',
            'ClientRef' => '000138230010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '230011',
                'ReferenceNumber' => '000138230011',
                'OrderNumber' => '000138230011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '57211',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '57211',
            'currency' => '840',
            'ClientRef' => '000138230011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138250010And000138250011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '250010',
                'ReferenceNumber' => '000138250010',
                'OrderNumber' => '000138250010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '250010',
            ),
            'amount' => '84794',
            'currency' => '840',
            'ClientRef' => '000138250010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '250011',
                'ReferenceNumber' => '000138250011',
                'OrderNumber' => '000138250011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '84794',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '84794',
            'currency' => '840',
            'ClientRef' => '000138250011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138270010And000138270011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '270010',
                'ReferenceNumber' => '000138270010',
                'OrderNumber' => '000138270010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '34251',
            'currency' => '840',
            'ClientRef' => '000138270010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '270011',
                'ReferenceNumber' => '000138270011',
                'OrderNumber' => '000138270011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34251',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34251',
            'currency' => '840',
            'ClientRef' => '000138270011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138300010And000138300011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '300010',
                'ReferenceNumber' => '000138300010',
                'OrderNumber' => '000138300010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '82952',
            'currency' => '840',
            'ClientRef' => '000138300010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '300011',
                'ReferenceNumber' => '000138300011',
                'OrderNumber' => '000138300011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '41473',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '41473',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '41473',
            'currency' => '840',
            'ClientRef' => '000138300011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000138310010And000138310011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '310010',
                'ReferenceNumber' => '000138310010',
                'OrderNumber' => '000138310010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '101294',
            'currency' => '840',
            'ClientRef' => '000138310010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '310011',
                'ReferenceNumber' => '000138310011',
                'OrderNumber' => '000138310011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '101294',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '101294',
            'currency' => '840',
            'ClientRef' => '000138310011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000139140010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '140010',
                'ReferenceNumber' => '000139140010',
                'OrderNumber' => '000139140010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '16300',
            'currency' => '840',
            'ClientRef' => '000139140010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000139160010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '160010',
                'ReferenceNumber' => '000139160010',
                'OrderNumber' => '000139160010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '16298',
            'currency' => '840',
            'ClientRef' => '000139160010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000139180010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '180010',
                'ReferenceNumber' => '000139180010',
                'OrderNumber' => '000139180010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '16242',
            'currency' => '840',
            'ClientRef' => '000139180010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000139220010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '220010',
                'ReferenceNumber' => '000139220010',
                'OrderNumber' => '000139220010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '16296',
            'currency' => '840',
            'ClientRef' => '000139220010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000140240010And000140240011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '240010',
                'ReferenceNumber' => '000140240010',
                'OrderNumber' => '000140240010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '111956',
            'currency' => '840',
            'ClientRef' => '000140240010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '240011',
                'ReferenceNumber' => '000140240011',
                'OrderNumber' => '000140240011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '111956',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '111956',
            'currency' => '840',
            'ClientRef' => '000140240011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180040010And000180040011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '5424180000007770',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '040010',
                'ReferenceNumber' => '000180040010',
                'OrderNumber' => '000180040010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '7678',
            'currency' => '840',
            'ClientRef' => '000180040010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000007770',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '040011',
                'ReferenceNumber' => '000180040011',
                'OrderNumber' => '000180040011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '7678',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '7678',
            'currency' => '840',
            'ClientRef' => '000180040011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180200010And000180200011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '200010',
                'ReferenceNumber' => '000180200010',
                'OrderNumber' => '000180200010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '34750',
            'currency' => '840',
            'ClientRef' => '000180200010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '200011',
                'ReferenceNumber' => '000180200011',
                'OrderNumber' => '000180200011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34750',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34750',
            'currency' => '840',
            'ClientRef' => '000180200011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180300010And000180300011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '6221280005638208',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '300010',
                'ReferenceNumber' => '000180300010',
                'OrderNumber' => '000180300010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '2612',
            'currency' => '840',
            'ClientRef' => '000180300010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6221280005638208',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '300011',
                'ReferenceNumber' => '000180300011',
                'OrderNumber' => '000180300011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '2612',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '2612',
            'currency' => '840',
            'ClientRef' => '000180300011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180930010And000180930011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '930010',
                'ReferenceNumber' => '000180930010',
                'OrderNumber' => '000180930010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '62282',
            'currency' => '840',
            'ClientRef' => '000180930010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '930011',
                'ReferenceNumber' => '000180930011',
                'OrderNumber' => '000180930011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '62282',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '62282',
            'currency' => '840',
            'ClientRef' => '000180930011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234920010And000234920011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '920010',
                'ReferenceNumber' => '000234920010',
                'OrderNumber' => '000234920010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '3661',
            'currency' => '840',
            'ClientRef' => '000234920010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TransactionInitiation' => 'Merchant',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '920011',
                'ReferenceNumber' => '000234920011',
                'OrderNumber' => '000234920011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '119',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'VisaGroup' => array(
                'AuthorizationCharacteristicsIndicator' => 'I',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '920011',
            ),
            'amount' => '119',
            'currency' => '840',
            'ClientRef' => '000234920011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234920012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '920012',
                'ReferenceNumber' => '000234920012',
                'OrderNumber' => '000234920012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '3780',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '3780',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '92001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '920012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '3780',
            'currency' => '840',
            'ClientRef' => '000234920012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234940010And000234940011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '940010',
                'ReferenceNumber' => '000234940010',
                'OrderNumber' => '000234940010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '3662',
            'currency' => '840',
            'ClientRef' => '000234940010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TransactionInitiation' => 'Merchant',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '940011',
                'ReferenceNumber' => '000234940011',
                'OrderNumber' => '000234940011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '121',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'VisaGroup' => array(
                'AuthorizationCharacteristicsIndicator' => 'I',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '940011',
            ),
            'amount' => '121',
            'currency' => '840',
            'ClientRef' => '000234940011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234940012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '940012',
                'ReferenceNumber' => '000234940012',
                'OrderNumber' => '000234940012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '3783',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '3783',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '94001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '940012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '3783',
            'currency' => '840',
            'ClientRef' => '000234940012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235820010And000235820011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '820010',
                'ReferenceNumber' => '000235820010',
                'OrderNumber' => '000235820010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '820010',
            ),
            'amount' => '3661',
            'currency' => '840',
            'ClientRef' => '000235820010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '820011',
                'ReferenceNumber' => '000235820011',
                'OrderNumber' => '000235820011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '820011',
            ),
            'amount' => '119',
            'currency' => '840',
            'ClientRef' => '000235820011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235820012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '820012',
                'ReferenceNumber' => '000235820012',
                'OrderNumber' => '000235820012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '3780',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '3780',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '82001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '820012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '3780',
            'currency' => '840',
            'ClientRef' => '000235820012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235840010And000235840011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '840010',
                'ReferenceNumber' => '000235840010',
                'OrderNumber' => '000235840010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '840010',
            ),
            'amount' => '3662',
            'currency' => '840',
            'ClientRef' => '000235840010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '840011',
                'ReferenceNumber' => '000235840011',
                'OrderNumber' => '000235840011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '840011',
            ),
            'amount' => '121',
            'currency' => '840',
            'ClientRef' => '000235840011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235840012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '840012',
                'ReferenceNumber' => '000235840012',
                'OrderNumber' => '000235840012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '3783',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '3783',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '84001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '840012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '3783',
            'currency' => '840',
            'ClientRef' => '000235840012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000245980010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '980010',
                'ReferenceNumber' => '000245980010',
                'OrderNumber' => '000245980010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '000',
            'currency' => '840',
            'ClientRef' => '000245980010',
        );

        // Act
        $request = $gateway->verification($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000245990010And000245990011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '990010',
                'ReferenceNumber' => '000245990010',
                'OrderNumber' => '000245990010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21000',
            'currency' => '840',
            'ClientRef' => '000245990010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '990011',
                'ReferenceNumber' => '000245990011',
                'OrderNumber' => '000245990011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21000',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '21000',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21000',
            'currency' => '840',
            'ClientRef' => '000245990011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246000010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '000010',
                'ReferenceNumber' => '000246000010',
                'OrderNumber' => '000246000010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '21001',
            'currency' => '840',
            'ClientRef' => '000246000010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246010010And000246010011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '010010',
                'ReferenceNumber' => '000246010010',
                'OrderNumber' => '000246010010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21002',
            'currency' => '840',
            'ClientRef' => '000246010010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '010011',
                'ReferenceNumber' => '000246010011',
                'OrderNumber' => '000246010011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21002',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21002',
            'currency' => '840',
            'ClientRef' => '000246010011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246030010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '030010',
                'ReferenceNumber' => '000246030010',
                'OrderNumber' => '000246030010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21004',
            'currency' => '840',
            'ClientRef' => '000246030010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246040010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '040010',
                'ReferenceNumber' => '000246040010',
                'OrderNumber' => '000246040010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '21005',
            'currency' => '840',
            'ClientRef' => '000246040010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246050010And000246050011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '050010',
                'ReferenceNumber' => '000246050010',
                'OrderNumber' => '000246050010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '21006',
            'currency' => '840',
            'ClientRef' => '000246050010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '050011',
                'ReferenceNumber' => '000246050011',
                'OrderNumber' => '000246050011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21006',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21006',
            'currency' => '840',
            'ClientRef' => '000246050011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246120010And000246120011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '120010',
                'ReferenceNumber' => '000246120010',
                'OrderNumber' => '000246120010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '21013',
            'currency' => '840',
            'ClientRef' => '000246120010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '120011',
                'ReferenceNumber' => '000246120011',
                'OrderNumber' => '000246120011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21013',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '21013',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21013',
            'currency' => '840',
            'ClientRef' => '000246120011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246130010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '130010',
                'ReferenceNumber' => '000246130010',
                'OrderNumber' => '000246130010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '21014',
            'currency' => '840',
            'ClientRef' => '000246130010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246140010And000246140011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '140010',
                'ReferenceNumber' => '000246140010',
                'OrderNumber' => '000246140010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '21015',
            'currency' => '840',
            'ClientRef' => '000246140010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '140011',
                'ReferenceNumber' => '000246140011',
                'OrderNumber' => '000246140011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21015',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21015',
            'currency' => '840',
            'ClientRef' => '000246140011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246160010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '160010',
                'ReferenceNumber' => '000246160010',
                'OrderNumber' => '000246160010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '21017',
            'currency' => '840',
            'ClientRef' => '000246160010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246170010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '170010',
                'ReferenceNumber' => '000246170010',
                'OrderNumber' => '000246170010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '21017',
            'currency' => '840',
            'ClientRef' => '000246170010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000246180010And000246180011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '180010',
                'ReferenceNumber' => '000246180010',
                'OrderNumber' => '000246180010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '21018',
            'currency' => '840',
            'ClientRef' => '000246180010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212123',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '180011',
                'ReferenceNumber' => '000246180011',
                'OrderNumber' => '000246180011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21018',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '21018',
            'currency' => '840',
            'ClientRef' => '000246180011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523220010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '220010',
                'ReferenceNumber' => '000523220010',
                'OrderNumber' => '000523220010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '62261',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '62261',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '22001000',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '220010',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '62261',
            'currency' => '840',
            'ClientRef' => '000523220010',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523260010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '260010',
                'ReferenceNumber' => '000523260010',
                'OrderNumber' => '000523260010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '83272',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '83272',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '26001000',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '260010',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '83272',
            'currency' => '840',
            'ClientRef' => '000523260010',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523320010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '320010',
                'ReferenceNumber' => '000523320010',
                'OrderNumber' => '000523320010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34258',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '34258',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '32001000',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '320010',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '34258',
            'currency' => '840',
            'ClientRef' => '000523320010',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523460010And000523460011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '460010',
                'ReferenceNumber' => '000523460010',
                'OrderNumber' => '000523460010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '60232',
            'currency' => '840',
            'ClientRef' => '000523460010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '460011',
                'ReferenceNumber' => '000523460011',
                'OrderNumber' => '000523460011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '30116',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '30116',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '30116',
            'currency' => '840',
            'ClientRef' => '000523460011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523470010And000523470011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '470010',
                'ReferenceNumber' => '000523470010',
                'OrderNumber' => '000523470010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '60334',
            'currency' => '840',
            'ClientRef' => '000523470010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '470011',
                'ReferenceNumber' => '000523470011',
                'OrderNumber' => '000523470011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '30164',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '30164',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '30164',
            'currency' => '840',
            'ClientRef' => '000523470011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523480010And000523480011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '480010',
                'ReferenceNumber' => '000523480010',
                'OrderNumber' => '000523480010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '60132',
            'currency' => '840',
            'ClientRef' => '000523480010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '480011',
                'ReferenceNumber' => '000523480011',
                'OrderNumber' => '000523480011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '30066',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '30066',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '30066',
            'currency' => '840',
            'ClientRef' => '000523480011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523500010And000523500011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '500010',
                'ReferenceNumber' => '000523500010',
                'OrderNumber' => '000523500010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '62888',
            'currency' => '840',
            'ClientRef' => '000523500010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '500011',
                'ReferenceNumber' => '000523500011',
                'OrderNumber' => '000523500011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '62885',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '62885',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '62885',
            'currency' => '840',
            'ClientRef' => '000523500011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523600010And000523600011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '600010',
                'ReferenceNumber' => '000523600010',
                'OrderNumber' => '000523600010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '600010',
            ),
            'amount' => '77190',
            'currency' => '840',
            'ClientRef' => '000523600010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '600011',
                'ReferenceNumber' => '000523600011',
                'OrderNumber' => '000523600011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38595',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38595',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38595',
            'currency' => '840',
            'ClientRef' => '000523600011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523610010And000523610011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '610010',
                'ReferenceNumber' => '000523610010',
                'OrderNumber' => '000523610010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '610010',
            ),
            'amount' => '77292',
            'currency' => '840',
            'ClientRef' => '000523610010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '610011',
                'ReferenceNumber' => '000523610011',
                'OrderNumber' => '000523610011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38643',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38643',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38643',
            'currency' => '840',
            'ClientRef' => '000523610011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523620010And000523620011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '620010',
                'ReferenceNumber' => '000523620010',
                'OrderNumber' => '000523620010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '620010',
            ),
            'amount' => '77090',
            'currency' => '840',
            'ClientRef' => '000523620010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '620011',
                'ReferenceNumber' => '000523620011',
                'OrderNumber' => '000523620011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38545',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38545',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38545',
            'currency' => '840',
            'ClientRef' => '000523620011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523650010And000523650011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '650010',
                'ReferenceNumber' => '000523650010',
                'OrderNumber' => '000523650010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '650010',
            ),
            'amount' => '77092',
            'currency' => '840',
            'ClientRef' => '000523650010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '650011',
                'ReferenceNumber' => '000523650011',
                'OrderNumber' => '000523650011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38543',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38543',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38543',
            'currency' => '840',
            'ClientRef' => '000523650011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523740010And000523740011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '740010',
                'ReferenceNumber' => '000523740010',
                'OrderNumber' => '000523740010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '55342',
            'currency' => '840',
            'ClientRef' => '000523740010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '740011',
                'ReferenceNumber' => '000523740011',
                'OrderNumber' => '000523740011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '27671',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '27671',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '27671',
            'currency' => '840',
            'ClientRef' => '000523740011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523750010And000523750011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '750010',
                'ReferenceNumber' => '000523750010',
                'OrderNumber' => '000523750010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '55444',
            'currency' => '840',
            'ClientRef' => '000523750010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '750011',
                'ReferenceNumber' => '000523750011',
                'OrderNumber' => '000523750011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Z',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '27719',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '27719',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '27719',
            'currency' => '840',
            'ClientRef' => '000523750011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523760010And000523760011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '760010',
                'ReferenceNumber' => '000523760010',
                'OrderNumber' => '000523760010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '55242',
            'currency' => '840',
            'ClientRef' => '000523760010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '760011',
                'ReferenceNumber' => '000523760011',
                'OrderNumber' => '000523760011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '27621',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '27621',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '27621',
            'currency' => '840',
            'ClientRef' => '000523760011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000523780010And000523780011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '379605177111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '780010',
                'ReferenceNumber' => '000523780010',
                'OrderNumber' => '000523780010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '35276',
            'currency' => '840',
            'ClientRef' => '000523780010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605177111118',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '780011',
                'ReferenceNumber' => '000523780011',
                'OrderNumber' => '000523780011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '35273',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '35273',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '35273',
            'currency' => '840',
            'ClientRef' => '000523780011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000532240010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '240010',
                'ReferenceNumber' => '000532240010',
                'OrderNumber' => '000532240010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '216092',
            'currency' => '840',
            'ClientRef' => '000532240010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000532250010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '250010',
                'ReferenceNumber' => '000532250010',
                'OrderNumber' => '000532250010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '216094',
            'currency' => '840',
            'ClientRef' => '000532250010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000532260010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '260010',
                'ReferenceNumber' => '000532260010',
                'OrderNumber' => '000532260010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '16252',
            'currency' => '840',
            'ClientRef' => '000532260010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000532270010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '270010',
                'ReferenceNumber' => '000532270010',
                'OrderNumber' => '000532270010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '16254',
            'currency' => '840',
            'ClientRef' => '000532270010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000532350010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '350010',
                'ReferenceNumber' => '000532350010',
                'OrderNumber' => '000532350010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '16248',
            'currency' => '840',
            'ClientRef' => '000532350010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000532360010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '360010',
                'ReferenceNumber' => '000532360010',
                'OrderNumber' => '000532360010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '16250',
            'currency' => '840',
            'ClientRef' => '000532360010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000532420010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '420010',
                'ReferenceNumber' => '000532420010',
                'OrderNumber' => '000532420010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '16240',
            'currency' => '840',
            'ClientRef' => '000532420010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000559750010And000559750011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '750010',
                'ReferenceNumber' => '000559750010',
                'OrderNumber' => '000559750010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '111228',
            'currency' => '840',
            'ClientRef' => '000559750010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '750011',
                'ReferenceNumber' => '000559750011',
                'OrderNumber' => '000559750011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '111228',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '111228',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '111228',
            'currency' => '840',
            'ClientRef' => '000559750011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000559760010And000559760011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '760010',
                'ReferenceNumber' => '000559760010',
                'OrderNumber' => '000559760010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '111078',
            'currency' => '840',
            'ClientRef' => '000559760010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '760011',
                'ReferenceNumber' => '000559760011',
                'OrderNumber' => '000559760011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '111078',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '111078',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '111078',
            'currency' => '840',
            'ClientRef' => '000559760011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000561160010And000561160011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '160010',
                'ReferenceNumber' => '000561160010',
                'OrderNumber' => '000561160010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '12544',
            'currency' => '840',
            'ClientRef' => '000561160010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '160011',
                'ReferenceNumber' => '000561160011',
                'OrderNumber' => '000561160011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '12544',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '12544',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '12544',
            'currency' => '840',
            'ClientRef' => '000561160011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000561170010And000561170011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '170010',
                'ReferenceNumber' => '000561170010',
                'OrderNumber' => '000561170010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '12546',
            'currency' => '840',
            'ClientRef' => '000561170010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '170011',
                'ReferenceNumber' => '000561170011',
                'OrderNumber' => '000561170011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '12546',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '12546',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '12546',
            'currency' => '840',
            'ClientRef' => '000561170011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000563390010And000563390011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5405001111111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '390010',
                'ReferenceNumber' => '000563390010',
                'OrderNumber' => '000563390010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '390010',
            ),
            'amount' => '112464',
            'currency' => '840',
            'ClientRef' => '000563390010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5405001111111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '390011',
                'ReferenceNumber' => '000563390011',
                'OrderNumber' => '000563390011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '112464',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '112464',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '112464',
            'currency' => '840',
            'ClientRef' => '000563390011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000563400010And000563400011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5405001111111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '400010',
                'ReferenceNumber' => '000563400010',
                'OrderNumber' => '000563400010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '400010',
            ),
            'amount' => '112282',
            'currency' => '840',
            'ClientRef' => '000563400010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5405001111111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '400011',
                'ReferenceNumber' => '000563400011',
                'OrderNumber' => '000563400011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '112282',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '112282',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '112282',
            'currency' => '840',
            'ClientRef' => '000563400011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000564570010And000564570011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '570010',
                'ReferenceNumber' => '000564570010',
                'OrderNumber' => '000564570010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '112108',
            'currency' => '840',
            'ClientRef' => '000564570010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '570011',
                'ReferenceNumber' => '000564570011',
                'OrderNumber' => '000564570011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '112108',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '112108',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '112108',
            'currency' => '840',
            'ClientRef' => '000564570011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000564580010And000564580011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '580010',
                'ReferenceNumber' => '000564580010',
                'OrderNumber' => '000564580010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '111530',
            'currency' => '840',
            'ClientRef' => '000564580010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '580011',
                'ReferenceNumber' => '000564580011',
                'OrderNumber' => '000564580011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '111530',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '111530',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '111530',
            'currency' => '840',
            'ClientRef' => '000564580011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000564590010And000564590011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '590010',
                'ReferenceNumber' => '000564590010',
                'OrderNumber' => '000564590010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'amount' => '111536',
            'currency' => '840',
            'ClientRef' => '000564590010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '590011',
                'ReferenceNumber' => '000564590011',
                'OrderNumber' => '000564590011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '111536',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '111536',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '111536',
            'currency' => '840',
            'ClientRef' => '000564590011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000565070010And000565070011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_MOTO'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_MOTO'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '070010',
                'ReferenceNumber' => '000565070010',
                'OrderNumber' => '000565070010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '111940',
            'currency' => '840',
            'ClientRef' => '000565070010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '08',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '01',
                'TerminalLocationIndicator' => '1',
                'CardCaptureCapability' => '0',
                'MerchantCategoryCode' => '5967',
                'STAN' => '070011',
                'ReferenceNumber' => '000565070011',
                'OrderNumber' => '000565070011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantEmailAddress' => getenv('RAPIDCONNECT_MERCHANT_EMAIL'),
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '111940',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '111940',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'EcommGroup' => array(
                'EcommTransactionIndicator' => '03',
                'CustomerServicePhoneNumber' => '1234567890',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '111940',
            'currency' => '840',
            'ClientRef' => '000565070011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022420010And000022420011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '420010',
                'ReferenceNumber' => '000022420010',
                'OrderNumber' => '000022420010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '10000',
            'currency' => '840',
            'ClientRef' => '000022420010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '420011',
                'ReferenceNumber' => '000022420011',
                'OrderNumber' => '000022420011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '10000',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '10000',
            'currency' => '840',
            'ClientRef' => '000022420011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022440010And000022440011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '440010',
                'ReferenceNumber' => '000022440010',
                'OrderNumber' => '000022440010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '62008',
            'currency' => '840',
            'ClientRef' => '000022440010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '440011',
                'ReferenceNumber' => '000022440011',
                'OrderNumber' => '000022440011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '32004',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '32004',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '32004',
            'currency' => '840',
            'ClientRef' => '000022440011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022460010And000022460011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '460010',
                'ReferenceNumber' => '000022460010',
                'OrderNumber' => '000022460010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '10500',
            'currency' => '840',
            'ClientRef' => '000022460010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '460011',
                'ReferenceNumber' => '000022460011',
                'OrderNumber' => '000022460011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '10500',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '10500',
            'currency' => '840',
            'ClientRef' => '000022460011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022480010And000022480011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '480010',
                'ReferenceNumber' => '000022480010',
                'OrderNumber' => '000022480010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '10700',
            'currency' => '840',
            'ClientRef' => '000022480010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '480011',
                'ReferenceNumber' => '000022480011',
                'OrderNumber' => '000022480011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '10700',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '10700',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '10700',
            'currency' => '840',
            'ClientRef' => '000022480011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022490010And000022490011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '490010',
                'ReferenceNumber' => '000022490010',
                'OrderNumber' => '000022490010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '10800',
            'currency' => '840',
            'ClientRef' => '000022490010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '490011',
                'ReferenceNumber' => '000022490011',
                'OrderNumber' => '000022490011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '10800',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '10800',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '10800',
            'currency' => '840',
            'ClientRef' => '000022490011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022580010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4001360000000090',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '580010',
                'ReferenceNumber' => '000022580010',
                'OrderNumber' => '000022580010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '000',
            'currency' => '840',
            'ClientRef' => '000022580010',
        );

        // Act
        $request = $gateway->verification($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022600010And000022600011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '600010',
                'ReferenceNumber' => '000022600010',
                'OrderNumber' => '000022600010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '9435',
            'currency' => '840',
            'ClientRef' => '000022600010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '600011',
                'ReferenceNumber' => '000022600011',
                'OrderNumber' => '000022600011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '9435',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '9435',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9335',
            'currency' => '840',
            'ClientRef' => '000022600011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022640010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005562231212149',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '640010',
                'ReferenceNumber' => '000022640010',
                'OrderNumber' => '000022640010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '63139',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '63139',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '64001000',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '640010',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '63139',
            'currency' => '840',
            'ClientRef' => '000022640010',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022770010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '770010',
                'ReferenceNumber' => '000022770010',
                'OrderNumber' => '000022770010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '55002',
            'currency' => '840',
            'ClientRef' => '000022770010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022790010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '790010',
                'ReferenceNumber' => '000022790010',
                'OrderNumber' => '000022790010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '55004',
            'currency' => '840',
            'ClientRef' => '000022790010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022810010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '810010',
                'ReferenceNumber' => '000022810010',
                'OrderNumber' => '000022810010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '55006',
            'currency' => '840',
            'ClientRef' => '000022810010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022820010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '820010',
                'ReferenceNumber' => '000022820010',
                'OrderNumber' => '000022820010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '55007',
            'currency' => '840',
            'ClientRef' => '000022820010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000022830010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '830010',
                'ReferenceNumber' => '000022830010',
                'OrderNumber' => '000022830010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '55008',
            'currency' => '840',
            'ClientRef' => '000022830010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000023170010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011361001684877',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '170010',
                'ReferenceNumber' => '000023170010',
                'OrderNumber' => '000023170010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '000',
            'currency' => '840',
            'ClientRef' => '000023170010',
        );

        // Act
        $request = $gateway->verification($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000023230010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '230010',
                'ReferenceNumber' => '000023230010',
                'OrderNumber' => '000023230010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '46957',
            'currency' => '840',
            'ClientRef' => '000023230010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000023270010And000023270011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '270010',
                'ReferenceNumber' => '000023270010',
                'OrderNumber' => '000023270010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '49439',
            'currency' => '840',
            'ClientRef' => '000023270010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '270011',
                'ReferenceNumber' => '000023270011',
                'OrderNumber' => '000023270011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '49439',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '49439',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '49339',
            'currency' => '840',
            'ClientRef' => '000023270011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000023670010And000023670011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '670010',
                'ReferenceNumber' => '000023670010',
                'OrderNumber' => '000023670010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '670010',
            ),
            'amount' => '21400',
            'currency' => '840',
            'ClientRef' => '000023670010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '670011',
                'ReferenceNumber' => '000023670011',
                'OrderNumber' => '000023670011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '21400',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '000',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
                'OriginalAuthorizationGroup' => array(
                    'OriginalAuthorizationID' => $response->getAuthorizationID(),
                    'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                    'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                    'OriginalSTAN' => $response->getSTAN(),
                    'OriginalResponseCode' => $response->getResponseCode(),
                ),
                'amount' => '21400',
                'currency' => '840',
                'ClientRef' => '000023670011',
            );

            // Act
            $request = $gateway->partialReversal($requestData);
            $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000023780010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '780010',
                'ReferenceNumber' => '000023780010',
                'OrderNumber' => '000023780010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '000',
            'currency' => '840',
            'ClientRef' => '000023780010',
        );

        // Act
        $request = $gateway->balanceInquiry($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000023840010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '840010',
                'ReferenceNumber' => '000023840010',
                'OrderNumber' => '000023840010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '22400',
            'currency' => '840',
            'ClientRef' => '000023840010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000023860010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '860010',
                'ReferenceNumber' => '000023860010',
                'OrderNumber' => '000023860010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '860010',
            ),
            'amount' => '22600',
            'currency' => '840',
            'ClientRef' => '000023860010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('500', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000024040010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '040010',
                'ReferenceNumber' => '000024040010',
                'OrderNumber' => '000024040010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '63139',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '63139',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '04001000',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '040010',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '63139',
            'currency' => '840',
            'ClientRef' => '000024040010',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000024110010And000024110011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '110010',
                'ReferenceNumber' => '000024110010',
                'OrderNumber' => '000024110010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '30000',
            'currency' => '840',
            'ClientRef' => '000024110010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '110011',
                'ReferenceNumber' => '000024110011',
                'OrderNumber' => '000024110011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '30000',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '30000',
            'currency' => '840',
            'ClientRef' => '000024110011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000024130010And000024130011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '130010',
                'ReferenceNumber' => '000024130010',
                'OrderNumber' => '000024130010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '54436',
            'currency' => '840',
            'ClientRef' => '000024130010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '130011',
                'ReferenceNumber' => '000024130011',
                'OrderNumber' => '000024130011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '27218',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '27218',
            'currency' => '840',
            'ClientRef' => '000024130011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000024150010And000024150011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '150010',
                'ReferenceNumber' => '000024150010',
                'OrderNumber' => '000024150010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '30500',
            'currency' => '840',
            'ClientRef' => '000024150010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '150011',
                'ReferenceNumber' => '000024150011',
                'OrderNumber' => '000024150011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '30500',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '30500',
            'currency' => '840',
            'ClientRef' => '000024150011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000024170010And000024170011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '170010',
                'ReferenceNumber' => '000024170010',
                'OrderNumber' => '000024170010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '30700',
            'currency' => '840',
            'ClientRef' => '000024170010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '170011',
                'ReferenceNumber' => '000024170011',
                'OrderNumber' => '000024170011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '30700',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '30700',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '30700',
            'currency' => '840',
            'ClientRef' => '000024170011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000024180010And000024180011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '1234',
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '180010',
                'ReferenceNumber' => '000024180010',
                'OrderNumber' => '000024180010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '30800',
            'currency' => '840',
            'ClientRef' => '000024180010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '180011',
                'ReferenceNumber' => '000024180011',
                'OrderNumber' => '000024180011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantName' => 'SMITH HARDWARE',
                'MerchantAddress' => '1307 Walt Whitman Road',
                'MerchantCity' => 'Melville',
                'MerchantState' => 'NY',
                'MerchantPostalCode' => '11747',
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '30800',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '30800',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '30800',
            'currency' => '840',
            'ClientRef' => '000024180011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000024230010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '371030089333338',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '230010',
                'ReferenceNumber' => '000024230010',
                'OrderNumber' => '000024230010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '000',
            'currency' => '840',
            'ClientRef' => '000024230010',
        );

        // Act
        $request = $gateway->verification($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000133760010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424181111112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '760010',
                'ReferenceNumber' => '000133760010',
                'OrderNumber' => '000133760010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '000',
            'currency' => '840',
            'ClientRef' => '000133760010',
        );

        // Act
        $request = $gateway->balanceInquiry($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000136760010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '760010',
                'ReferenceNumber' => '000136760010',
                'OrderNumber' => '000136760010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '62110',
            'currency' => '840',
            'ClientRef' => '000136760010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000136870010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '870010',
                'ReferenceNumber' => '000136870010',
                'OrderNumber' => '000136870010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '54202',
            'currency' => '840',
            'ClientRef' => '000136870010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000136970010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '970010',
                'ReferenceNumber' => '000136970010',
                'OrderNumber' => '000136970010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '62144',
            'currency' => '840',
            'ClientRef' => '000136970010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137020010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '020010',
                'ReferenceNumber' => '000137020010',
                'OrderNumber' => '000137020010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '83136',
            'currency' => '840',
            'ClientRef' => '000137020010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137050010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '050010',
                'ReferenceNumber' => '000137050010',
                'OrderNumber' => '000137050010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '34146',
            'currency' => '840',
            'ClientRef' => '000137050010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137070010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '070010',
                'ReferenceNumber' => '000137070010',
                'OrderNumber' => '000137070010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '34139',
            'currency' => '840',
            'ClientRef' => '000137070010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137120010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '120010',
                'ReferenceNumber' => '000137120010',
                'OrderNumber' => '000137120010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '101135',
            'currency' => '840',
            'ClientRef' => '000137120010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137140010And000137140011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '140010',
                'ReferenceNumber' => '000137140010',
                'OrderNumber' => '000137140010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '57210',
            'currency' => '840',
            'ClientRef' => '000137140010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '140011',
                'ReferenceNumber' => '000137140011',
                'OrderNumber' => '000137140011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '57210',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '57210',
            'currency' => '840',
            'ClientRef' => '000137140011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137170010And000137170011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '170010',
                'ReferenceNumber' => '000137170010',
                'OrderNumber' => '000137170010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '57311',
            'currency' => '840',
            'ClientRef' => '000137170010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '170011',
                'ReferenceNumber' => '000137170011',
                'OrderNumber' => '000137170011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '57311',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '57311',
            'currency' => '840',
            'ClientRef' => '000137170011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137200010And000137200011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '200010',
                'ReferenceNumber' => '000137200010',
                'OrderNumber' => '000137200010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '76056',
            'currency' => '840',
            'ClientRef' => '000137200010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '200011',
                'ReferenceNumber' => '000137200011',
                'OrderNumber' => '000137200011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38028',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38028',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38028',
            'currency' => '840',
            'ClientRef' => '000137200011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137230010And000137230011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '230010',
                'ReferenceNumber' => '000137230010',
                'OrderNumber' => '000137230010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '76052',
            'currency' => '840',
            'ClientRef' => '000137230010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '230011',
                'ReferenceNumber' => '000137230011',
                'OrderNumber' => '000137230011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '38026',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '38026',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '38026',
            'currency' => '840',
            'ClientRef' => '000137230011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137260010And000137260011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '260010',
                'ReferenceNumber' => '000137260010',
                'OrderNumber' => '000137260010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '34104',
            'currency' => '840',
            'ClientRef' => '000137260010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '260011',
                'ReferenceNumber' => '000137260011',
                'OrderNumber' => '000137260011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34104',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34104',
            'currency' => '840',
            'ClientRef' => '000137260011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137290010And000137290011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '290010',
                'ReferenceNumber' => '000137290010',
                'OrderNumber' => '000137290010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '34451',
            'currency' => '840',
            'ClientRef' => '000137290010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '290011',
                'ReferenceNumber' => '000137290011',
                'OrderNumber' => '000137290011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34451',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34451',
            'currency' => '840',
            'ClientRef' => '000137290011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000137320010And000137320011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '320010',
                'ReferenceNumber' => '000137320010',
                'OrderNumber' => '000137320010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '101299',
            'currency' => '840',
            'ClientRef' => '000137320010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '320011',
                'ReferenceNumber' => '000137320011',
                'OrderNumber' => '000137320011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '101299',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '101299',
            'currency' => '840',
            'ClientRef' => '000137320011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000139630010And000139630011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '630010',
                'ReferenceNumber' => '000139630010',
                'OrderNumber' => '000139630010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '41334',
            'currency' => '840',
            'ClientRef' => '000139630010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '630011',
                'ReferenceNumber' => '000139630011',
                'OrderNumber' => '000139630011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '41334',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '41334',
            'currency' => '840',
            'ClientRef' => '000139630011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000139750010And000139750011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '750010',
                'ReferenceNumber' => '000139750010',
                'OrderNumber' => '000139750010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '750010',
            ),
            'amount' => '241330',
            'currency' => '840',
            'ClientRef' => '000139750010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '750011',
                'ReferenceNumber' => '000139750011',
                'OrderNumber' => '000139750011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '241330',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '241330',
            'currency' => '840',
            'ClientRef' => '000139750011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000139860010And000139860011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '860010',
                'ReferenceNumber' => '000139860010',
                'OrderNumber' => '000139860010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '241362',
            'currency' => '840',
            'ClientRef' => '000139860010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '860011',
                'ReferenceNumber' => '000139860011',
                'OrderNumber' => '000139860011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '120681',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '120681',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '120681',
            'currency' => '840',
            'ClientRef' => '000139860011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000139950010And000139950011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011208702221113',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '950010',
                'ReferenceNumber' => '000139950010',
                'OrderNumber' => '000139950010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '41294',
            'currency' => '840',
            'ClientRef' => '000139950010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702221113',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '950011',
                'ReferenceNumber' => '000139950011',
                'OrderNumber' => '000139950011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '20647',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '20647',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '20647',
            'currency' => '840',
            'ClientRef' => '000139950011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000140000010And000140000011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '000010',
                'ReferenceNumber' => '000140000010',
                'OrderNumber' => '000140000010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '241332',
            'currency' => '840',
            'ClientRef' => '000140000010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '000011',
                'ReferenceNumber' => '000140000011',
                'OrderNumber' => '000140000011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '241332',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '241332',
            'currency' => '840',
            'ClientRef' => '000140000011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000140010010And000140010011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '010010',
                'ReferenceNumber' => '000140010010',
                'OrderNumber' => '000140010010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '241104',
            'currency' => '840',
            'ClientRef' => '000140010010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '010011',
                'ReferenceNumber' => '000140010011',
                'OrderNumber' => '000140010011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '241104',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '241104',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '241104',
            'currency' => '840',
            'ClientRef' => '000140010011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000141460010And000141460011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '460010',
                'ReferenceNumber' => '000141460010',
                'OrderNumber' => '000141460010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '11946',
            'currency' => '840',
            'ClientRef' => '000141460010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '460011',
                'ReferenceNumber' => '000141460011',
                'OrderNumber' => '000141460011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '11946',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '11946',
            'currency' => '840',
            'ClientRef' => '000141460011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000141470010And000141470011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '470010',
                'ReferenceNumber' => '000141470010',
                'OrderNumber' => '000141470010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '11352',
            'currency' => '840',
            'ClientRef' => '000141470010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111551',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '470011',
                'ReferenceNumber' => '000141470011',
                'OrderNumber' => '000141470011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '5676',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '5676',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '5676',
            'currency' => '840',
            'ClientRef' => '000141470011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000141830010And000141830011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '830010',
                'ReferenceNumber' => '000141830010',
                'OrderNumber' => '000141830010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '12722',
            'currency' => '840',
            'ClientRef' => '000141830010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '830011',
                'ReferenceNumber' => '000141830011',
                'OrderNumber' => '000141830011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '12722',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '12722',
            'currency' => '840',
            'ClientRef' => '000141830011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000141840010And000141840011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '840010',
                'ReferenceNumber' => '000141840010',
                'OrderNumber' => '000141840010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '12192',
            'currency' => '840',
            'ClientRef' => '000141840010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '840011',
                'ReferenceNumber' => '000141840011',
                'OrderNumber' => '000141840011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '6096',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '6096',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '6096',
            'currency' => '840',
            'ClientRef' => '000141840011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000142070010And000142070011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4761530001115556',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '070010',
                'ReferenceNumber' => '000142070010',
                'OrderNumber' => '000142070010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '12810',
            'currency' => '840',
            'ClientRef' => '000142070010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4761530001115556',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '070011',
                'ReferenceNumber' => '000142070011',
                'OrderNumber' => '000142070011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '12810',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '12810',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '12810',
            'currency' => '840',
            'ClientRef' => '000142070011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000142080010And000142080011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '080010',
                'ReferenceNumber' => '000142080010',
                'OrderNumber' => '000142080010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '12298',
            'currency' => '840',
            'ClientRef' => '000142080010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '080011',
                'ReferenceNumber' => '000142080011',
                'OrderNumber' => '000142080011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '12298',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '12298',
            'currency' => '840',
            'ClientRef' => '000142080011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000142240010And000142240011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '240010',
                'ReferenceNumber' => '000142240010',
                'OrderNumber' => '000142240010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '13570',
            'currency' => '840',
            'ClientRef' => '000142240010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '240011',
                'ReferenceNumber' => '000142240011',
                'OrderNumber' => '000142240011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '13570',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '13570',
            'currency' => '840',
            'ClientRef' => '000142240011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000142450010And000142450011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '450010',
                'ReferenceNumber' => '000142450010',
                'OrderNumber' => '000142450010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '450010',
            ),
            'amount' => '13680',
            'currency' => '840',
            'ClientRef' => '000142450010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '450011',
                'ReferenceNumber' => '000142450011',
                'OrderNumber' => '000142450011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '13680',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '13680',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '13680',
            'currency' => '840',
            'ClientRef' => '000142450011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000142610010And000142610011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '610010',
                'ReferenceNumber' => '000142610010',
                'OrderNumber' => '000142610010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14540',
            'currency' => '840',
            'ClientRef' => '000142610010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208701112222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '610011',
                'ReferenceNumber' => '000142610011',
                'OrderNumber' => '000142610011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '14540',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '14540',
            'currency' => '840',
            'ClientRef' => '000142610011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000142620010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '620010',
                'ReferenceNumber' => '000142620010',
                'OrderNumber' => '000142620010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '10912',
            'currency' => '840',
            'ClientRef' => '000142620010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000180140010And000180140011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '140010',
                'ReferenceNumber' => '000180140010',
                'OrderNumber' => '000180140010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '34150',
            'currency' => '840',
            'ClientRef' => '000180140010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '140011',
                'ReferenceNumber' => '000180140011',
                'OrderNumber' => '000180140011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34150',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '34150',
            'currency' => '840',
            'ClientRef' => '000180140011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000181150010And000181150011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '150010',
                'ReferenceNumber' => '000181150010',
                'OrderNumber' => '000181150010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '62151',
            'currency' => '840',
            'ClientRef' => '000181150010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '150011',
                'ReferenceNumber' => '000181150011',
                'OrderNumber' => '000181150011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '62151',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '62151',
            'currency' => '840',
            'ClientRef' => '000181150011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000181190010And000181190011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '190010',
                'ReferenceNumber' => '000181190010',
                'OrderNumber' => '000181190010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '101142',
            'currency' => '840',
            'ClientRef' => '000181190010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208702222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '190011',
                'ReferenceNumber' => '000181190011',
                'OrderNumber' => '000181190011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '101142',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '101142',
            'currency' => '840',
            'ClientRef' => '000181190011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000181230010And000181230011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '230010',
                'ReferenceNumber' => '000181230010',
                'OrderNumber' => '000181230010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '83143',
            'currency' => '840',
            'ClientRef' => '000181230010',
        );

        // Act
        $request = $gateway->refund($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '230011',
                'ReferenceNumber' => '000181230011',
                'OrderNumber' => '000181230011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '83143',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '83143',
            'currency' => '840',
            'ClientRef' => '000181230011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Refund';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234620010And000234620011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '620010',
                'ReferenceNumber' => '000234620010',
                'OrderNumber' => '000234620010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '12252',
            'currency' => '840',
            'ClientRef' => '000234620010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TransactionInitiation' => 'Merchant',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '620011',
                'ReferenceNumber' => '000234620011',
                'OrderNumber' => '000234620011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '811',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'VisaGroup' => array(
                'AuthorizationCharacteristicsIndicator' => 'I',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '620011',
            ),
            'amount' => '811',
            'currency' => '840',
            'ClientRef' => '000234620011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234620012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '620012',
                'ReferenceNumber' => '000234620012',
                'OrderNumber' => '000234620012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '13063',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '13063',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '62001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '620012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '13063',
            'currency' => '840',
            'ClientRef' => '000234620012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234640010And000234640011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '640010',
                'ReferenceNumber' => '000234640010',
                'OrderNumber' => '000234640010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '12252',
            'currency' => '840',
            'ClientRef' => '000234640010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TransactionInitiation' => 'Merchant',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '640011',
                'ReferenceNumber' => '000234640011',
                'OrderNumber' => '000234640011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '812',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'VisaGroup' => array(
                'AuthorizationCharacteristicsIndicator' => 'I',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '640011',
            ),
            'amount' => '812',
            'currency' => '840',
            'ClientRef' => '000234640011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234640012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '640012',
                'ReferenceNumber' => '000234640012',
                'OrderNumber' => '000234640012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '13064',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '13064',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '64001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '640012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '13064',
            'currency' => '840',
            'ClientRef' => '000234640012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234660010And000234660011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '660010',
                'ReferenceNumber' => '000234660010',
                'OrderNumber' => '000234660010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '9055',
            'currency' => '840',
            'ClientRef' => '000234660010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TransactionInitiation' => 'Merchant',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '660011',
                'ReferenceNumber' => '000234660011',
                'OrderNumber' => '000234660011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '1246',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'VisaGroup' => array(
                'AuthorizationCharacteristicsIndicator' => 'I',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '660011',
            ),
            'amount' => '1246',
            'currency' => '840',
            'ClientRef' => '000234660011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000234660012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571701111111',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '660012',
                'ReferenceNumber' => '000234660012',
                'OrderNumber' => '000234660012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '10301',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '10301',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '66001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '660012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '10301',
            'currency' => '840',
            'ClientRef' => '000234660012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235520010And000235520011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '520010',
                'ReferenceNumber' => '000235520010',
                'OrderNumber' => '000235520010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '520010',
            ),
            'amount' => '12252',
            'currency' => '840',
            'ClientRef' => '000235520010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '520011',
                'ReferenceNumber' => '000235520011',
                'OrderNumber' => '000235520011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '520011',
            ),
            'amount' => '812',
            'currency' => '840',
            'ClientRef' => '000235520011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235520012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '520012',
                'ReferenceNumber' => '000235520012',
                'OrderNumber' => '000235520012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'AVSResultCode' => 'Y',
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '13064',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '13064',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '52001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '520012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '13064',
            'currency' => '840',
            'ClientRef' => '000235520012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235540010And000235540011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '540010',
                'ReferenceNumber' => '000235540010',
                'OrderNumber' => '000235540010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '540010',
            ),
            'amount' => '12252',
            'currency' => '840',
            'ClientRef' => '000235540010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '540011',
                'ReferenceNumber' => '000235540011',
                'OrderNumber' => '000235540011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '540011',
            ),
            'amount' => '812',
            'currency' => '840',
            'ClientRef' => '000235540011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235540012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '540012',
                'ReferenceNumber' => '000235540012',
                'OrderNumber' => '000235540012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '13064',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '13064',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '54001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '540012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '13064',
            'currency' => '840',
            'ClientRef' => '000235540012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235560010And000235560011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '560010',
                'ReferenceNumber' => '000235560010',
                'OrderNumber' => '000235560010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '560010',
            ),
            'amount' => '9055',
            'currency' => '840',
            'ClientRef' => '000235560010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '560011',
                'ReferenceNumber' => '000235560011',
                'OrderNumber' => '000235560011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '560011',
            ),
            'amount' => '1246',
            'currency' => '840',
            'ClientRef' => '000235560011',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000235560012()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '560012',
                'ReferenceNumber' => '000235560012',
                'OrderNumber' => '000235560012',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '10301',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '10301',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '56001200',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '560012',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '10301',
            'currency' => '840',
            'ClientRef' => '000235560012',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521380010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '380010',
                'ReferenceNumber' => '000521380010',
                'OrderNumber' => '000521380010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '76054',
            'currency' => '840',
            'ClientRef' => '000521380010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521390010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '390010',
                'ReferenceNumber' => '000521390010',
                'OrderNumber' => '000521390010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '84315',
            'currency' => '840',
            'ClientRef' => '000521390010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521420010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '420010',
                'ReferenceNumber' => '000521420010',
                'OrderNumber' => '000521420010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '76050',
            'currency' => '840',
            'ClientRef' => '000521420010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521520010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '520010',
                'ReferenceNumber' => '000521520010',
                'OrderNumber' => '000521520010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '34128',
            'currency' => '840',
            'ClientRef' => '000521520010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521820010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '820010',
                'ReferenceNumber' => '000521820010',
                'OrderNumber' => '000521820010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '62107',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '62107',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '82001000',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '820010',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '62107',
            'currency' => '840',
            'ClientRef' => '000521820010',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521840010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '840010',
                'ReferenceNumber' => '000521840010',
                'OrderNumber' => '000521840010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '83301',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '83301',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '84001000',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '840010',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '83301',
            'currency' => '840',
            'ClientRef' => '000521840010',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521860010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '860010',
                'ReferenceNumber' => '000521860010',
                'OrderNumber' => '000521860010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '34103',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '34103',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => '86001000',
                'OriginalLocalDateandTime' => $now->format('Ymdhis'),
                'OriginalTransmissionDateandTime' => $now->format('Ymdhis'),
                'OriginalSTAN' => '860010',
                'OriginalResponseCode' => '000',
            ),
            'amount' => '34103',
            'currency' => '840',
            'ClientRef' => '000521860010',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521900010And000521900011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '900010',
                'ReferenceNumber' => '000521900010',
                'OrderNumber' => '000521900010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '59098',
            'currency' => '840',
            'ClientRef' => '000521900010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '900011',
                'ReferenceNumber' => '000521900011',
                'OrderNumber' => '000521900011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '29549',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '29549',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '29549',
            'currency' => '840',
            'ClientRef' => '000521900011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521930010And000521930011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '930010',
                'ReferenceNumber' => '000521930010',
                'OrderNumber' => '000521930010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '59094',
            'currency' => '840',
            'ClientRef' => '000521930010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '930011',
                'ReferenceNumber' => '000521930011',
                'OrderNumber' => '000521930011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '29547',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '29547',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '29547',
            'currency' => '840',
            'ClientRef' => '000521930011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000521980010And000521980011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '980010',
                'ReferenceNumber' => '000521980010',
                'OrderNumber' => '000521980010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '84794',
            'currency' => '840',
            'ClientRef' => '000521980010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '980011',
                'ReferenceNumber' => '000521980011',
                'OrderNumber' => '000521980011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '84794',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '84794',
            'currency' => '840',
            'ClientRef' => '000521980011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000522000010And000522000011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '000010',
                'ReferenceNumber' => '000522000010',
                'OrderNumber' => '000522000010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '54208',
            'currency' => '840',
            'ClientRef' => '000522000010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '000011',
                'ReferenceNumber' => '000522000011',
                'OrderNumber' => '000522000011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '27104',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '27104',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '27104',
            'currency' => '840',
            'ClientRef' => '000522000011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000522030010And000522030011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '030010',
                'ReferenceNumber' => '000522030010',
                'OrderNumber' => '000522030010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '54204',
            'currency' => '840',
            'ClientRef' => '000522030010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '030011',
                'ReferenceNumber' => '000522030011',
                'OrderNumber' => '000522030011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '27102',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '27102',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '27102',
            'currency' => '840',
            'ClientRef' => '000522030011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533450010And000533450011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '450010',
                'ReferenceNumber' => '000533450010',
                'OrderNumber' => '000533450010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '41406',
            'currency' => '840',
            'ClientRef' => '000533450010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '450011',
                'ReferenceNumber' => '000533450011',
                'OrderNumber' => '000533450011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '41406',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '41406',
            'currency' => '840',
            'ClientRef' => '000533450011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533460010And000533460011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '460010',
                'ReferenceNumber' => '000533460010',
                'OrderNumber' => '000533460010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '241192',
            'currency' => '840',
            'ClientRef' => '000533460010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '460011',
                'ReferenceNumber' => '000533460011',
                'OrderNumber' => '000533460011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '120596',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '120596',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '120596',
            'currency' => '840',
            'ClientRef' => '000533460011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533560010And000533560011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '560010',
                'ReferenceNumber' => '000533560010',
                'OrderNumber' => '000533560010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '241370',
            'currency' => '840',
            'ClientRef' => '000533560010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005571702222222',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '560011',
                'ReferenceNumber' => '000533560011',
                'OrderNumber' => '000533560011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '120685',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '120685',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '120685',
            'currency' => '840',
            'ClientRef' => '000533560011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533570010And000533570011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4055010000000005',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '570010',
                'ReferenceNumber' => '000533570010',
                'OrderNumber' => '000533570010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '241230',
            'currency' => '840',
            'ClientRef' => '000533570010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4055010000000005',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '570011',
                'ReferenceNumber' => '000533570011',
                'OrderNumber' => '000533570011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '241230',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '241230',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '241230',
            'currency' => '840',
            'ClientRef' => '000533570011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533580010And000533580011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '580010',
                'ReferenceNumber' => '000533580010',
                'OrderNumber' => '000533580010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '241074',
            'currency' => '840',
            'ClientRef' => '000533580010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4264281511117771',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '580011',
                'ReferenceNumber' => '000533580011',
                'OrderNumber' => '000533580011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '241074',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '241074',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '241074',
            'currency' => '840',
            'ClientRef' => '000533580011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533660010And000533660011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '660010',
                'ReferenceNumber' => '000533660010',
                'OrderNumber' => '000533660010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '660010',
            ),
            'amount' => '41402',
            'currency' => '840',
            'ClientRef' => '000533660010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '660011',
                'ReferenceNumber' => '000533660011',
                'OrderNumber' => '000533660011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '41402',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
                'MasterCardACI' => 'I',
                'MasterCardAdditionalData' => '0000000000000',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '41402',
            'currency' => '840',
            'ClientRef' => '000533660011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533670010And000533670011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '670010',
                'ReferenceNumber' => '000533670010',
                'OrderNumber' => '000533670010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '670010',
            ),
            'amount' => '241242',
            'currency' => '840',
            'ClientRef' => '000533670010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180000005550',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '670011',
                'ReferenceNumber' => '000533670011',
                'OrderNumber' => '000533670011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '120621',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '120621',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '120621',
            'currency' => '840',
            'ClientRef' => '000533670011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533770010And000533770011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '770010',
                'ReferenceNumber' => '000533770010',
                'OrderNumber' => '000533770010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '770010',
            ),
            'amount' => '241298',
            'currency' => '840',
            'ClientRef' => '000533770010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180273333333',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '770011',
                'ReferenceNumber' => '000533770011',
                'OrderNumber' => '000533770011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '241298',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '241298',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '241298',
            'currency' => '840',
            'ClientRef' => '000533770011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533780010And000533780011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5405001111111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'TransactionInitiation' => 'Merchant',
                'STAN' => '780010',
                'ReferenceNumber' => '000533780010',
                'OrderNumber' => '000533780010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '1',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalSTAN' => '780010',
            ),
            'amount' => '241082',
            'currency' => '840',
            'ClientRef' => '000533780010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5405001111111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '780011',
                'ReferenceNumber' => '000533780011',
                'OrderNumber' => '000533780011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '241082',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '241082',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '241082',
            'currency' => '840',
            'ClientRef' => '000533780011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533860010And000533860011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '860010',
                'ReferenceNumber' => '000533860010',
                'OrderNumber' => '000533860010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '41394',
            'currency' => '840',
            'ClientRef' => '000533860010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '860011',
                'ReferenceNumber' => '000533860011',
                'OrderNumber' => '000533860011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '41394',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '41394',
            'currency' => '840',
            'ClientRef' => '000533860011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533870010And000533870011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '870010',
                'ReferenceNumber' => '000533870010',
                'OrderNumber' => '000533870010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '241152',
            'currency' => '840',
            'ClientRef' => '000533870010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '870011',
                'ReferenceNumber' => '000533870011',
                'OrderNumber' => '000533870011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '120576',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '120576',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '120576',
            'currency' => '840',
            'ClientRef' => '000533870011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533950010And000533950011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '950010',
                'ReferenceNumber' => '000533950010',
                'OrderNumber' => '000533950010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '241154',
            'currency' => '840',
            'ClientRef' => '000533950010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '375987654111116',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '950011',
                'ReferenceNumber' => '000533950011',
                'OrderNumber' => '000533950011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '120577',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '120577',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '120577',
            'currency' => '840',
            'ClientRef' => '000533950011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533960010And000533960011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '960010',
                'ReferenceNumber' => '000533960010',
                'OrderNumber' => '000533960010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '41328',
            'currency' => '840',
            'ClientRef' => '000533960010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '960011',
                'ReferenceNumber' => '000533960011',
                'OrderNumber' => '000533960011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '41328',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '41328',
            'currency' => '840',
            'ClientRef' => '000533960011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000533970010And000533970011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '970010',
                'ReferenceNumber' => '000533970010',
                'OrderNumber' => '000533970010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '41016',
            'currency' => '840',
            'ClientRef' => '000533970010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '371030089111114',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '970011',
                'ReferenceNumber' => '000533970011',
                'OrderNumber' => '000533970011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '41016',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '41016',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '41016',
            'currency' => '840',
            'ClientRef' => '000533970011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000541820010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '820010',
                'ReferenceNumber' => '000541820010',
                'OrderNumber' => '000541820010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14426',
            'currency' => '840',
            'ClientRef' => '000541820010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000544370010And000544370011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '370010',
                'ReferenceNumber' => '000544370010',
                'OrderNumber' => '000544370010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '10624',
            'currency' => '840',
            'ClientRef' => '000544370010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '370011',
                'ReferenceNumber' => '000544370011',
                'OrderNumber' => '000544370011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '5312',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '5312',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '5312',
            'currency' => '840',
            'ClientRef' => '000544370011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000544390010And000544390011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '390010',
                'ReferenceNumber' => '000544390010',
                'OrderNumber' => '000544390010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14152',
            'currency' => '840',
            'ClientRef' => '000544390010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '390011',
                'ReferenceNumber' => '000544390011',
                'OrderNumber' => '000544390011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '14152',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '14152',
            'currency' => '840',
            'ClientRef' => '000544390011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Authorization';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000544400010And000544400011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '400010',
                'ReferenceNumber' => '000544400010',
                'OrderNumber' => '000544400010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '10622',
            'currency' => '840',
            'ClientRef' => '000544400010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '3566000022222228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '400011',
                'ReferenceNumber' => '000544400011',
                'OrderNumber' => '000544400011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '5311',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '5311',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '5311',
            'currency' => '840',
            'ClientRef' => '000544400011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000544420010And000544420011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '420010',
                'ReferenceNumber' => '000544420010',
                'OrderNumber' => '000544420010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14150',
            'currency' => '840',
            'ClientRef' => '000544420010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '420011',
                'ReferenceNumber' => '000544420011',
                'OrderNumber' => '000544420011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CardGroup' => array(
                'MergeWithExisting' => true,
                'CCVResultCode' => 'Match',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '14150',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '14150',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '14150',
            'currency' => '840',
            'ClientRef' => '000544420011',
        );

        // Act
        $request = $gateway->capture($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000544470010And000544470011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '470010',
                'ReferenceNumber' => '000544470010',
                'OrderNumber' => '000544470010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14168',
            'currency' => '840',
            'ClientRef' => '000544470010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '470011',
                'ReferenceNumber' => '000544470011',
                'OrderNumber' => '000544470011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '14168',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '14168',
            'currency' => '840',
            'ClientRef' => '000544470011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000549250010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '4264281500001119',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '250010',
                'ReferenceNumber' => '000549250010',
                'OrderNumber' => '000549250010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '259809',
            'currency' => '840',
            'ClientRef' => '000549250010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('P', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000549260010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '4264281555555555',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '260010',
                'ReferenceNumber' => '000549260010',
                'OrderNumber' => '000549260010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '259109',
            'currency' => '840',
            'ClientRef' => '000549260010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('N', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000549410010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '5424180000000007',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '410010',
                'ReferenceNumber' => '000549410010',
                'OrderNumber' => '000549410010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '264157',
            'currency' => '840',
            'ClientRef' => '000549410010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('N', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000549420010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '5424180000007770',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '420010',
                'ReferenceNumber' => '000549420010',
                'OrderNumber' => '000549420010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '270527',
            'currency' => '840',
            'ClientRef' => '000549420010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Y', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000549570010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '379605175555555',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '570010',
                'ReferenceNumber' => '000549570010',
                'OrderNumber' => '000549570010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '247729',
            'currency' => '840',
            'ClientRef' => '000549570010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('U', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000549580010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '379605170000003',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '580010',
                'ReferenceNumber' => '000549580010',
                'OrderNumber' => '000549580010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '242957',
            'currency' => '840',
            'ClientRef' => '000549580010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('A', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000549730010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '730010',
                'ReferenceNumber' => '000549730010',
                'OrderNumber' => '000549730010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '281908',
            'currency' => '840',
            'ClientRef' => '000549730010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000549750010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingAddress1' => '1307 Broad Hollow Road',
                'billingPostcode' => '11747',
                'number' => '6011361000000000',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '750010',
                'ReferenceNumber' => '000549750010',
                'OrderNumber' => '000549750010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'CustomerInformationGroup' => array(
                'AVSBillingAddress' => '1307 Broad Hollow Road',
                'AVSBillingPostalCode' => '11747',
            ),
            'amount' => '273409',
            'currency' => '840',
            'ClientRef' => '000549750010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('N', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000569010010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '010010',
                'ReferenceNumber' => '000569010010',
                'OrderNumber' => '000569010010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '11826',
            'currency' => '840',
            'ClientRef' => '000569010010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000569020010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '020010',
                'ReferenceNumber' => '000569020010',
                'OrderNumber' => '000569020010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '11712',
            'currency' => '840',
            'ClientRef' => '000569020010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000569030010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '030010',
                'ReferenceNumber' => '000569030010',
                'OrderNumber' => '000569030010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '11720',
            'currency' => '840',
            'ClientRef' => '000569030010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000569040010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '040010',
                'ReferenceNumber' => '000569040010',
                'OrderNumber' => '000569040010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '11728',
            'currency' => '840',
            'ClientRef' => '000569040010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000569050010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '1234',
                'number' => '379605176666666',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'amex',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '050010',
                'ReferenceNumber' => '000569050010',
                'OrderNumber' => '000569050010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '11736',
            'currency' => '840',
            'ClientRef' => '000569050010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000569610010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '610010',
                'ReferenceNumber' => '000569610010',
                'OrderNumber' => '000569610010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '12878',
            'currency' => '840',
            'ClientRef' => '000569610010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000569620010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '620010',
                'ReferenceNumber' => '000569620010',
                'OrderNumber' => '000569620010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '12486',
            'currency' => '840',
            'ClientRef' => '000569620010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000569640010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '640010',
                'ReferenceNumber' => '000569640010',
                'OrderNumber' => '000569640010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '12504',
            'currency' => '840',
            'ClientRef' => '000569640010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000569650010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '4264281511112228',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '650010',
                'ReferenceNumber' => '000569650010',
                'OrderNumber' => '000569650010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '12512',
            'currency' => '840',
            'ClientRef' => '000569650010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000570150010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '150010',
                'ReferenceNumber' => '000570150010',
                'OrderNumber' => '000570150010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '13580',
            'currency' => '840',
            'ClientRef' => '000570150010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000570160010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '160010',
                'ReferenceNumber' => '000570160010',
                'OrderNumber' => '000570160010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '13392',
            'currency' => '840',
            'ClientRef' => '000570160010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000570180010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '180010',
                'ReferenceNumber' => '000570180010',
                'OrderNumber' => '000570180010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '13410',
            'currency' => '840',
            'ClientRef' => '000570180010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000570190010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '190010',
                'ReferenceNumber' => '000570190010',
                'OrderNumber' => '000570190010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '13418',
            'currency' => '840',
            'ClientRef' => '000570190010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000570600010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '600010',
                'ReferenceNumber' => '000570600010',
                'OrderNumber' => '000570600010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14556',
            'currency' => '840',
            'ClientRef' => '000570600010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000570610010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '610010',
                'ReferenceNumber' => '000570610010',
                'OrderNumber' => '000570610010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14116',
            'currency' => '840',
            'ClientRef' => '000570610010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000570620010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '620010',
                'ReferenceNumber' => '000570620010',
                'OrderNumber' => '000570620010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14124',
            'currency' => '840',
            'ClientRef' => '000570620010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000570630010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '630010',
                'ReferenceNumber' => '000570630010',
                'OrderNumber' => '000570630010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14312',
            'currency' => '840',
            'ClientRef' => '000570630010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000570650010()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '650010',
                'ReferenceNumber' => '000570650010',
                'OrderNumber' => '000570650010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '14328',
            'currency' => '840',
            'ClientRef' => '000570650010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000584940010And000584940011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '6240000006438706',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '940010',
                'ReferenceNumber' => '000584940010',
                'OrderNumber' => '000584940010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '18012',
            'currency' => '840',
            'ClientRef' => '000584940010',
        );

        // Act
        $request = $gateway->purchase($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6240000006438706',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '940011',
                'ReferenceNumber' => '000584940011',
                'OrderNumber' => '000584940011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '18012',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '18012',
            'currency' => '840',
            'ClientRef' => '000584940011',
        );

        // Act
        $requestData['CommonGroup']['TransactionType'] = 'Sale';
        $request = $gateway->void($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000756850010And000756850011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '850010',
                'ReferenceNumber' => '000756850010',
                'OrderNumber' => '000756850010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '19632',
            'currency' => '840',
            'ClientRef' => '000756850010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '850011',
                'ReferenceNumber' => '000756850011',
                'OrderNumber' => '000756850011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '19632',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '19632',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9716',
            'currency' => '840',
            'ClientRef' => '000756850011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000756860010And000756860011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '860010',
                'ReferenceNumber' => '000756860010',
                'OrderNumber' => '000756860010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '9437',
            'currency' => '840',
            'ClientRef' => '000756860010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '860011',
                'ReferenceNumber' => '000756860011',
                'OrderNumber' => '000756860011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '9437',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '9437',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9337',
            'currency' => '840',
            'ClientRef' => '000756860011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000756880010And000756880011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '880010',
                'ReferenceNumber' => '000756880010',
                'OrderNumber' => '000756880010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '9439',
            'currency' => '840',
            'ClientRef' => '000756880010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '880011',
                'ReferenceNumber' => '000756880011',
                'OrderNumber' => '000756880011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '9439',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '9439',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9339',
            'currency' => '840',
            'ClientRef' => '000756880011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000756890010And000756890011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011208701118880',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '890010',
                'ReferenceNumber' => '000756890010',
                'OrderNumber' => '000756890010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '19636',
            'currency' => '840',
            'ClientRef' => '000756890010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208701118880',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '890011',
                'ReferenceNumber' => '000756890011',
                'OrderNumber' => '000756890011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '19636',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '19636',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9718',
            'currency' => '840',
            'ClientRef' => '000756890011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000756940010And000756940011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '940010',
                'ReferenceNumber' => '000756940010',
                'OrderNumber' => '000756940010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '19632',
            'currency' => '840',
            'ClientRef' => '000756940010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '4005578003333335',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'visa',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '940011',
                'ReferenceNumber' => '000756940011',
                'OrderNumber' => '000756940011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '19632',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '19632',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9716',
            'currency' => '840',
            'ClientRef' => '000756940011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000756950010And000756950011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '950010',
                'ReferenceNumber' => '000756950010',
                'OrderNumber' => '000756950010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '9437',
            'currency' => '840',
            'ClientRef' => '000756950010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '950011',
                'ReferenceNumber' => '000756950011',
                'OrderNumber' => '000756950011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '9437',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '9437',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9337',
            'currency' => '840',
            'ClientRef' => '000756950011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000756970010And000756970011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '970010',
                'ReferenceNumber' => '000756970010',
                'OrderNumber' => '000756970010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'amount' => '9439',
            'currency' => '840',
            'ClientRef' => '000756970010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011361000006668',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '970011',
                'ReferenceNumber' => '000756970011',
                'OrderNumber' => '000756970011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '9439',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '9439',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9339',
            'currency' => '840',
            'ClientRef' => '000756970011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000756980010And000756980011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'number' => '6011208701118880',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '980010',
                'ReferenceNumber' => '000756980010',
                'OrderNumber' => '000756980010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'amount' => '19636',
            'currency' => '840',
            'ClientRef' => '000756980010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '6011208701118880',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'discover',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '980011',
                'ReferenceNumber' => '000756980011',
                'OrderNumber' => '000756980011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '19636',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '19636',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9718',
            'currency' => '840',
            'ClientRef' => '000756980011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000757050010And000757050011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '050010',
                'ReferenceNumber' => '000757050010',
                'OrderNumber' => '000757050010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '9447',
            'currency' => '840',
            'ClientRef' => '000757050010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '050011',
                'ReferenceNumber' => '000757050011',
                'OrderNumber' => '000757050011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '9447',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '9447',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9347',
            'currency' => '840',
            'ClientRef' => '000757050011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000757060010And000757060011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'billingPostcode' => '11747',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '060010',
                'ReferenceNumber' => '000757060010',
                'OrderNumber' => '000757060010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '19644',
            'currency' => '840',
            'ClientRef' => '000757060010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Z', $response->getAVSResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '01',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '060011',
                'ReferenceNumber' => '000757060011',
                'OrderNumber' => '000757060011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '19644',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '19644',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9722',
            'currency' => '840',
            'ClientRef' => '000757060011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000757350010And000757350011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '350010',
                'ReferenceNumber' => '000757350010',
                'OrderNumber' => '000757350010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '9493',
            'currency' => '840',
            'ClientRef' => '000757350010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5424180011113336',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '350011',
                'ReferenceNumber' => '000757350011',
                'OrderNumber' => '000757350011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '9493',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '9493',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9393',
            'currency' => '840',
            'ClientRef' => '000757350011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }


    public function testCaseNumber000757360010And000757360011()
    {
        // Arrange
        $expirationDate = new \DateTime();
        $expirationDate->add(new \DateInterval('P1Y'));
        $expiryMonth = $expirationDate->format('m');
        $expiryYear = $expirationDate->format('Y');

        $now = new \DateTime();
        $now->setTimezone(new \DateTimeZone('GMT'));

        $gateway = new RapidConnectGateway($this->getHttpClient(), $this->getHttpRequest());
        $gateway->setApp(getenv('RAPIDCONNECT_APP'));
        $gateway->setGroupID(getenv('RAPIDCONNECT_GROUPID'));
        $gateway->setServiceID(getenv('RAPIDCONNECT_SERVICEID'));
        $gateway->setTerminalID(getenv('RAPIDCONNECT_TERMINALID'));
        $gateway->setDID(getenv('RAPIDCONNECT_DID_RETAIL'));
        $gateway->setMerchantID(getenv('RAPIDCONNECT_MERCHANTID_RETAIL'));

        $requestData = array(
            'card' => array(
                'cvv' => '123',
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '360010',
                'ReferenceNumber' => '000757360010',
                'OrderNumber' => '000757360010',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'PartialAuthorizationApprovalCapability' => '1',
                ),
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'amount' => '19654',
            'currency' => '840',
            'ClientRef' => '000757360010',
        );

        // Act
        $request = $gateway->authorize($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('Match', $response->getCCVResultCode());
            $this->assertEquals('002', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }


        // Arrange
        $requestData = array(
            'card' => array(
                'number' => '5256977001111110',
                'expiryMonth' => $expiryMonth,
                'expiryYear' => $expiryYear,
                'type' => 'mastercard',
            ),
            'CommonGroup' => array(
                'TPPID' => str_pad(getenv('RAPIDCONNECT_TPPID'), 6, '0'),
                'LocalDateandTime' => $now->format('Ymdhis'),
                'TransmissionDateandTime' => $now->format('Ymdhis'),
                'POSEntryMode' => array(
                    'entryMode' => '90',
                    'pinCapability' => '2',
                ),

                'POSConditionCode' => '00',
                'TerminalCategoryCode' => '00',
                'TerminalEntryCapability' => '03',
                'TerminalLocationIndicator' => '0',
                'CardCaptureCapability' => '1',
                'MerchantCategoryCode' => '5399',
                'STAN' => '360011',
                'ReferenceNumber' => '000757360011',
                'OrderNumber' => '000757360011',
            ),
            'AlternateMerchantNameandAddressGroup' => array(
                'MerchantCountry' => '840',
            ),
            'MastercardGroup' => array(
                'AuthorizationType' => '0',
            ),
            'AdditionalAmountGroups' => array(
                array(
                    'AdditionalAmount' => '19654',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'TotalAuthAmt',
                ),
                array(
                    'AdditionalAmount' => '19654',
                    'AdditionalAmountCurrency' => '840',
                    'AdditionalAmountType' => 'FirstAuthAmt',
                ),
            ),
            'OriginalAuthorizationGroup' => array(
                'OriginalAuthorizationID' => $response->getAuthorizationID(),
                'OriginalLocalDateandTime' => $response->getLocalDateandTime(),
                'OriginalTransmissionDateandTime' => $response->getTransmissionDateandTime(),
                'OriginalSTAN' => $response->getSTAN(),
                'OriginalResponseCode' => $response->getResponseCode(),
            ),
            'amount' => '9727',
            'currency' => '840',
            'ClientRef' => '000757360011',
        );

        // Act
        $request = $gateway->partialReversal($requestData);
        $response = $request->send();

        // Assert
        try {
            $this->assertEquals('000', $response->getResponseCode());
        } catch (\PHPUnit_Framework_ExpectationFailedException $e) {
            $testCaseNumber = $requestData['ClientRef'];
            $responseCode = $response->getResponseCode();
            if ($responseCode === null) {
                $responseCode = 'null';
            }
            $errorData = $response->getErrorData();
            if ($errorData === null) {
                $errorData = 'null';
            }
            $this->fail("$testCaseNumber,$responseCode,\"$errorData\"");
        }
    }

}
